webpackJsonp([31],[function(n,r,e){function i(){this.categoryShowCount=20,this.pageMaxCount=199,this.frm1=$("#queryForm"),this.frm2=$("#listForm")}function t(n){var r=this;$.extend(!0,r,{param:{},url:{service:"",template:""},wrap:null,limit:4},n),0!==r.wrap.length&&t.prototype.init.call(r)}var a=e(117),o=new a;window.pageEntity=o,$(function(){var n=Boolean(window.ismmt)||!1;if(n){new t({param:{st:"splb"},wrap:$("#highQualityMod"),url:{service:"http://flow.org.hc360.com/flowtreasure/flowTreasureFP",template:"http://detail.b2b.hc360.com/detail/turbine/action/GetModuleEditBoxAction/eventsubmit_doGet/doGet?filename=page.businwindow"},limit:4})}(new i).init()}),i.prototype={init:function(){var n=this;n.showAndHide(),$("#byPriceBtn").on("click",function(){var r=$(this);r.hasClass("ArrowUpCur")||r.hasClass("ArrowDownCur")||n.queryByConditionFun("","a",""),r.hasClass("ArrowUpCur")&&!r.hasClass("ArrowDownCur")&&n.queryByConditionFun("","d",""),!r.hasClass("ArrowUpCur")&&r.hasClass("ArrowDownCur")&&n.queryByConditionFun("","a","")}),$("#byTimeBtn").on("click",function(){var r=$(this);r.hasClass("ArrowUpCur")||r.hasClass("ArrowDownCur")||n.queryByConditionFun("","","a"),r.hasClass("ArrowUpCur")&&!r.hasClass("ArrowDownCur")&&n.queryByConditionFun("","","d"),!r.hasClass("ArrowUpCur")&&r.hasClass("ArrowDownCur")&&n.queryByConditionFun("","","a")}),$("#resetBtn").on("click",function(){n.resetQueryFun()}),$("#confirmBtn").on("click",function(){n.queryByConditionFun("","","")}),$("#onLineTrade").on("click",function(){n.queryByConditionFun("","","")}),$(".pageNumCon").find("a").on("click",function(r){r.preventDefault();var e=$(this),i=e.attr("data-page");n.queryByConditionFun(i)}),$("#turnPageBtn").on("click",function(){n.turnPage()}),$(".OnConsulting").hide(),$(".dProList ul").find("li").hover(function(){var n=$(this);n.find(".OnConsulting").show().on("click",function(){righToolbar&&righToolbar.onlineConsult()})},function(){var n=$(this);n.find(".OnConsulting").hide()}),$.ajax({type:"get",url:"http://order.b2b.hc360.com/brandneworder/checkbuslinks.html",data:{providerid:window.providerId},timeout:3e3,dataType:"jsonp",jsonp:"jsoncallback",success:function(n){n&&($("#sytico").length>0?$("#sytico").show():$("#service-message").length>0&&$("#service-message").show())},error:function(n){}})},showAndHide:function(){var n=this,r=$("#mainContList").find("li").length,e=$("#mainContList").find("li:gt(19)");if(r>n.categoryShowCount){if($(".reClassShow").show(),0===e.length)return!1;e.hide(),$(".reClassShow").on("click",function(){e.show(),$(".reClassHide").show()}),$(".reClassHide").on("click",function(){e.hide(),$(".reClassHide").hide(),$(".reClassShow").show()})}else $(".reClassShow,.reClassHide").hide()},queryByConditionFun:function(n,r,e){var i=this,t=$.trim($("#priceH").val()),a=$.trim($("#priceL").val()),o=i.frm1.find("input[name='onLineTrade']"),s=i.frm1.find("input[name='priceOrderType']"),u=i.frm1.find("input[name='updateOrderType']"),l=i.frm1.find("input[name='page']");return a&&!i.isDigit(a)||t&&!i.isDigit(t)?(alert("\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u4ef7\u683c\uff01"),!1):(t&&a&&Number(t)<Number(a)&&($("#priceH").val(a),$("#priceL").val(t)),o&&o.is(":checked")&&o.val(1),n&&l.val(n),r?(s.val(r),u.val("")):e&&(u.val(e),s.val("")),void i.formSubmit(i.frm1))},resetQueryFun:function(){var n=this,r=n.frm1.find("#onLineTrade"),e=n.frm1.find("input[name='page']");n.frm1.find("input[name='searchname']").val(""),n.frm1.find("input[name='priceOrderType']").val(""),n.frm1.find("input[name='updateOrderType']").val(""),n.frm1.find("input[name='seriesId']").val(""),n.frm1.find("input[name='priceL']").val(""),n.frm1.find("input[name='priceH']").val(""),r&&r.val(""),e.val("1"),n.formSubmit(n.frm1)},turnPage:function(){var n=this,r=$.trim($("#pageInput").val());return n.isDigit(r)?r>n.pageMaxCount?(alert("\u586b\u5199\u7684\u9875\u7801\u4e0d\u80fd\u5927\u4e8e\u6700\u5927\u9875!"),!1):r<1?(alert("\u586b\u5199\u7684\u9875\u7801\u4e0d\u80fd\u5c0f\u4e8e1!"),!1):(n.frm2.find("input[name='page']").val(r),void n.formSubmit(n.frm2)):(alert("\u586b\u5199\u7684\u9875\u7801\u4e0d\u5408\u6cd5\uff01"),!1)},formSubmit:function(n){function r(n,r){var e="#PageNum#",i=n.indexOf(e);return i==-1?n:n=n.substring(0,i)+r+n.substring(i+e.length,n.length)}var e=n.attr("action"),i=n.find("input[name='page']").val();i=null==i||""==i?"":i,n.attr("action",r(e,i)),n.submit()},isDigit:function(n){var r,e,i;if(i="0123456789",0==n.length)return!1;for(r=0;r<n.length;r++)if(e=i.indexOf(n.charAt(r)),e==-1)return!1;return!0}},t.prototype.init=function(){var n=this;$.when.apply(null,n.getDeferreds()).done(function(r,e){var i=n.pretreatData(r[0]||[]);n.sendexposurelog(i),n.wrap.find("#highQualityList").html(mustache.render(e[0],{prolist:i})),n.wrap.show()}).fail(function(){n.wrap.hide()})},t.prototype.pretreatData=function(n){for(var r=this,e=n.slice(0,r.limit),i=[],t=0;t<e.length;t++){var a={title:e[t].bc_title.replace(/\\/gim,""),url:e[t].supplyself_url,midPic:e[t].image210,price:e[t].bc_price,curPriceUnit:null,bcid:e[t].bc_id,count:t+1};a.curPriceUnit=Number(e[t].bc_price)?"<strong>&yen</strong>"+e[t].bc_price:"\u9762\u8bae",a.trade=1===Number(e[t].is_support_trade)?"<s>&nbsp;</s>":"",i.push(a)}return i},t.prototype.sendexposurelog=function(n){for(var r=[],e=0;e<n.length;e++)r.push("llb_detailbcid"+n[e].bc_id);r.length&&HC.exposure.sendexposurelog({exposurecompany:"",exposureproduct:r.join("#&#"),exposureadvert:""})},t.prototype.getDeferreds=function(){var n=this,r=[];r.push($.ajax({url:n.url.service,type:"GET",dataType:"jsonp",jsonp:"callbackparam",timeout:3e3,scriptCharset:"utf-8",data:n.param})),r.push($.ajax({url:n.url.template,type:"GET",dataType:"jsonp"}));var i=$.Deferred();return r.push(i),e.e(3,function(n){e(54),i.resolve()}),r}}]);