webpackJsonp([31],[function(n,r,i){function e(){this.categoryShowCount=20,this.pageMaxCount=199,this.frm1=$("#queryForm"),this.frm2=$("#listForm")}function t(n){var r=this;$.extend(!0,r,{param:{},url:{service:"",template:""},wrap:null,limit:4},n),0!==r.wrap.length&&t.prototype.init.call(r)}var a=i(113),o=new a;window.pageEntity=o,$(function(){var n=Boolean(window.ismmt)||!1;if(n){new t({param:{st:"splb"},wrap:$("#highQualityMod"),url:{service:"http://flow.org.hc360.com/flowtreasure/flowTreasureFP",template:"/detail/turbine/action/GetModuleEditBoxAction/eventsubmit_doGet/doGet?filename=page.businwindow"},limit:4})}(new e).init()}),e.prototype={init:function(){var n=this;n.showAndHide(),$("#byPriceBtn").on("click",function(){var r=$(this);r.hasClass("ArrowUpCur")||r.hasClass("ArrowDownCur")||n.queryByConditionFun("","a",""),r.hasClass("ArrowUpCur")&&!r.hasClass("ArrowDownCur")&&n.queryByConditionFun("","d",""),!r.hasClass("ArrowUpCur")&&r.hasClass("ArrowDownCur")&&n.queryByConditionFun("","a","")}),$("#byTimeBtn").on("click",function(){var r=$(this);r.hasClass("ArrowUpCur")||r.hasClass("ArrowDownCur")||n.queryByConditionFun("","","a"),r.hasClass("ArrowUpCur")&&!r.hasClass("ArrowDownCur")&&n.queryByConditionFun("","","d"),!r.hasClass("ArrowUpCur")&&r.hasClass("ArrowDownCur")&&n.queryByConditionFun("","","a")}),$("#resetBtn").on("click",function(){n.resetQueryFun()}),$("#confirmBtn").on("click",function(){n.queryByConditionFun("","","")}),$("#onLineTrade").on("click",function(){n.queryByConditionFun("","","")}),$(".pageNumCon").find("a").on("click",function(r){r.preventDefault();var i=$(this),e=i.attr("data-page");n.queryByConditionFun(e)}),$("#turnPageBtn").on("click",function(){n.turnPage()}),$(".OnConsulting").hide(),$(".dProList ul").find("li").hover(function(){var n=$(this);n.find(".OnConsulting").show().on("click",function(){righToolbar&&righToolbar.onlineConsult()})},function(){var n=$(this);n.find(".OnConsulting").hide()})},showAndHide:function(){var n=this,r=$("#mainContList").find("li").length,i=$("#mainContList").find("li:gt(19)");if(r>n.categoryShowCount){if($(".reClassShow").show(),0===i.length)return!1;i.hide(),$(".reClassShow").on("click",function(){i.show(),$(".reClassHide").show()}),$(".reClassHide").on("click",function(){i.hide(),$(".reClassHide").hide(),$(".reClassShow").show()})}else $(".reClassShow,.reClassHide").hide()},queryByConditionFun:function(n,r,i){var e=this,t=$.trim($("#priceH").val()),a=$.trim($("#priceL").val()),o=e.frm1.find("input[name='onLineTrade']"),u=e.frm1.find("input[name='priceOrderType']"),s=e.frm1.find("input[name='updateOrderType']"),l=e.frm1.find("input[name='page']");return a&&!e.isDigit(a)||t&&!e.isDigit(t)?(alert("\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u4ef7\u683c\uff01"),!1):(t&&a&&Number(t)<Number(a)&&($("#priceH").val(a),$("#priceL").val(t)),o&&o.is(":checked")&&o.val(1),n&&l.val(n),r?(u.val(r),s.val("")):i&&(s.val(i),u.val("")),void e.formSubmit(e.frm1))},resetQueryFun:function(){var n=this,r=n.frm1.find("#onLineTrade"),i=n.frm1.find("input[name='page']");n.frm1.find("input[name='searchname']").val(""),n.frm1.find("input[name='priceOrderType']").val(""),n.frm1.find("input[name='updateOrderType']").val(""),n.frm1.find("input[name='seriesId']").val(""),n.frm1.find("input[name='priceL']").val(""),n.frm1.find("input[name='priceH']").val(""),r&&r.val(""),i.val("1"),n.formSubmit(n.frm1)},turnPage:function(){var n=this,r=$.trim($("#pageInput").val());return n.isDigit(r)?r>n.pageMaxCount?(alert("\u586b\u5199\u7684\u9875\u7801\u4e0d\u80fd\u5927\u4e8e\u6700\u5927\u9875!"),!1):r<1?(alert("\u586b\u5199\u7684\u9875\u7801\u4e0d\u80fd\u5c0f\u4e8e1!"),!1):(n.frm2.find("input[name='page']").val(r),void n.formSubmit(n.frm2)):(alert("\u586b\u5199\u7684\u9875\u7801\u4e0d\u5408\u6cd5\uff01"),!1)},formSubmit:function(n){function r(n,r){var i="#PageNum#",e=n.indexOf(i);return e==-1?n:n=n.substring(0,e)+r+n.substring(e+i.length,n.length)}var i=n.attr("action"),e=n.find("input[name='page']").val();e=null==e||""==e?"":e,n.attr("action",r(i,e)),n.submit()},isDigit:function(n){var r,i,e;if(e="0123456789",0==n.length)return!1;for(r=0;r<n.length;r++)if(i=e.indexOf(n.charAt(r)),i==-1)return!1;return!0}},t.prototype.init=function(){var n=this;$.when.apply(null,n.getDeferreds()).done(function(r,i){var e=n.pretreatData(r[0]||[]);n.sendexposurelog(e),n.wrap.find("#highQualityList").html(mustache.render(i[0],{prolist:e})),n.wrap.show()}).fail(function(){n.wrap.hide()})},t.prototype.pretreatData=function(n){for(var r=this,i=n.slice(0,r.limit),e=[],t=0;t<i.length;t++){var a={title:i[t].bc_title.replace(/\\/gim,""),url:i[t].supplyself_url,midPic:i[t].image210,price:i[t].bc_price,curPriceUnit:null,bcid:i[t].bc_id,count:t+1};a.curPriceUnit=Number(i[t].bc_price)?"<strong>&yen</strong>"+i[t].bc_price:"\u9762\u8bae",a.trade=1===Number(i[t].is_support_trade)?"<s>&nbsp;</s>":"",e.push(a)}return e},t.prototype.sendexposurelog=function(n){for(var r=[],i=0;i<n.length;i++)r.push("llb_detailbcid"+n[i].bc_id);r.length&&HC.exposure.sendexposurelog({exposurecompany:"",exposureproduct:r.join("#&#"),exposureadvert:""})},t.prototype.getDeferreds=function(){var n=this,r=[];r.push($.ajax({url:n.url.service,type:"GET",dataType:"jsonp",jsonp:"callbackparam",timeout:3e3,scriptCharset:"utf-8",data:n.param})),r.push($.ajax({url:n.url.template,type:"GET",dataType:"jsonp"}));var e=$.Deferred();return r.push(e),i.e(3,function(n){i(51),e.resolve()}),r}}]);