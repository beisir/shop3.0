webpackJsonp([2],{51:function(t,e,o){function a(t){return o(i(t))}function i(t){return n[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var n={"./module_ads":52,"./module_ads.js":52,"./module_album_window":62,"./module_album_window.js":62,"./module_banner_ads":63,"./module_banner_ads.js":63,"./module_banner_products":64,"./module_banner_products.js":64,"./module_banner_widescreen_ads":68,"./module_banner_widescreen_ads.js":68,"./module_certificate":69,"./module_certificate.js":69,"./module_company_album":70,"./module_company_album.js":70,"./module_company_dynamic":71,"./module_company_dynamic.js":71,"./module_company_intro":72,"./module_company_intro.js":72,"./module_contact_us":73,"./module_contact_us.js":73,"./module_crumbs":74,"./module_crumbs.js":74,"./module_custom":75,"./module_custom.js":75,"./module_custom_video":77,"./module_custom_video.js":77,"./module_customchannel":78,"./module_customchannel.js":78,"./module_extend_window":79,"./module_extend_window.js":79,"./module_feedback":80,"./module_feedback.js":80,"./module_friendship_link":81,"./module_friendship_link.js":81,"./module_latest_supply":82,"./module_latest_supply.js":82,"./module_mmt_archives":83,"./module_mmt_archives.js":83,"./module_navigation":84,"./module_navigation.js":84,"./module_prod_classify":85,"./module_prod_classify.js":85,"./module_prod_window":86,"./module_prod_window.js":86,"./module_prof_window":87,"./module_prof_window.js":87,"./module_sign":88,"./module_sign.js":88,"./module_widescreen_custom":89,"./module_widescreen_custom.js":89};a.keys=function(){return Object.keys(n)},a.resolve=i,t.exports=a,a.id=51},52:function(t,e,o){var a=o(53),i=function(t,e,o){var i=this;i.module=t,i.moduleBox=t.htmlEntity,i.moduleData=$.extend(!0,{},t.dataEntity),i.moduleData.data.piclist.slice(0,6),i.moduleData.data.prolist.slice(0,8),i.copy_moduleData=$.extend(!0,{},t.dataEntity),i.options=o||{},i.tempHtml=a.getTemplateFromHTML(e),i.pageData={pageindex:1,pagesize:40,providerid:pageEntity.providerid},i.selectCount=i.moduleData.data.prolist.length,i.totalCount=6,i.webuploderObj={swf:"//style.org.hc360.cn/js/module/shop3.0/dist/components/webuploader/webuploader.swf?t="+Math.random(),server:"//imgup.b2b.hc360.com/imgup/turbine/action/imgup.PicManagementAction/eventsubmit_doPerform/ddd",formData:{operType:"upload",picstr:$.trim($("#picstr").val())||""},fileVal:"file",threads:1,fileSizeLimit:5242880,accept:{title:"Images",extensions:"gif,jpg,jpeg,png",mimeTypes:"image/gif,image/jpg,image/jpeg,image/png"},duplicate:!0,auto:!0},$.when.apply(null,i.loadComponents()).done(function(){i.initLayer()})};i.prototype={initLayer:function(){var t=this,e={type:function(){return 1==t.moduleData.data.type?1:0},transition:function(){return[{key:"\u5de6\u53f3\u5207\u6362",value:0},{key:"\u4e0a\u4e0b\u5207\u6362",value:1}]},interval:function(){return[{pause:3},{pause:5}]}};t.editDialog=dialog({title:"\u7f16\u8f91\u5185\u5bb9>\u5bbd\u5c4f\u5e7f\u544a",content:mustache.render([t.tempHtml.editDialog,t.tempHtml.modifyProDialog,t.tempHtml.proSingleDialog,t.tempHtml.proBatchDialog].join(""),e)}).showModal(),t.options.rendedCallback&&t.options.rendedCallback.call(t),t.bindEvent()},bindEvent:function(){var t=this;t.dialogWrap=$(t.editDialog.node),t.editDialogWrap=t.dialogWrap.find("[node-name='editDialog']"),t.modifyProDialogWrap=t.dialogWrap.find("[node-name='modifyProDialog']"),t.proSingleDialogWrap=t.dialogWrap.find("[node-name='proSingleDialog']"),t.proBatchDialogWrap=t.dialogWrap.find("[node-name='proBatchDialog']"),t.picLi=t.editDialogWrap.find("#picList li"),t.editDialogWrap.find(".layout-info:eq(1) #transitionDiv select").val(t.moduleData.data.transition),t.editDialogWrap.find(".layout-info:eq(1) #pauseDiv select").val(t.moduleData.data.pause/1e3),1==t.copy_moduleData.data.type?($("[data-type='pagePic']").addClass("curRadioBox"),$("[data-name='pagePicDiv']").show(),$("[data-name='loopProDiv']").hide()):($("[data-type='loopPro']").addClass("curRadioBox"),$("[data-name='loopProDiv']").show(),$("[data-name='pagePicDiv']").hide()),t.copy_moduleData.data.piclist.length>0&&$.each(t.copy_moduleData.data.piclist,function(e,o){$(t.picLi[e]).find(".inputW220 input").val(o.picurl),$(t.picLi[e]).find(".inputW210 input").val(o.linkurl)}),t.editDialogWrap.find(".layout-info:first .radioCon").on("click",function(){var e=$(this),o=$(this).attr("data-type");e.addClass("curRadioBox").siblings(".radioCon").removeClass("curRadioBox"),$("[data-name='"+o+"Div']").show().siblings("[data-name $= 'Div']").hide(),t.editDialog.focus()}),t.editDialogWrap.find("span[data-name='clearBtn']").on("click",function(){var t=$(this);return(""!=$.trim(t.parent().siblings(".inputW220").find("input").val())||""!=$.trim(t.parent().siblings(".inputW210").find("input").val()))&&void dialog({title:"\u63d0\u793a",content:"\u786e\u5b9a\u8981\u6e05\u9664\u5f53\u524d\u56fe\u7247\u53ca\u94fe\u63a5\u5730\u5740\u5417\uff1f",okValue:"\u786e\u5b9a",cancelValue:"\u53d6\u6d88",ok:function(){return this.close().remove(),t.parent().siblings(".inputW220,.inputW210").find("input").val(""),!1},cancel:function(){return this.close().remove(),!1}}).showModal()}),t.editDialogWrap.find("span[data-name='upBtn']").on("click",function(){var t=$(this),e=t.closest("ul"),o=t.closest("li");if(o.insertBefore(o.prev("li")),o.is(e.children(":first")))$(this).addClass("arrowGray-up").removeClass("arrowBlue-up"),o.next("li").find("[data-name='upBtn']").removeClass("arrowGray-up").addClass("arrowBlue-up");else{var a=$(this).siblings("[data-name='downBtn']");a.hasClass("arrowGray-down")&&(a.removeClass("arrowGray-down").addClass("arrowBlue-down"),o.next("li").find("[data-name='downBtn']").addClass("arrowGray-down").removeClass("arrowBlue-down"))}}),t.editDialogWrap.find("span[data-name='downBtn']").on("click",function(){var t=$(this),e=t.closest("ul"),o=t.closest("li");if(o.insertAfter(o.next("li")),o.is(e.children(":last")))$(this).addClass("arrowGray-down").removeClass("arrowBlue-down"),o.prev("li").find("[data-name='downBtn']").addClass("arrowBlue-down").removeClass("arrowGray-down");else{var a=$(this).siblings("[data-name='upBtn']");a.hasClass("arrowGray-up")&&(a.removeClass("arrowGray-up").addClass("arrowBlue-up"),o.prev("li").find("[data-name='upBtn']").addClass("arrowGray-up").removeClass("arrowBlue-up"))}}),t.uploadImgFunc(),t.editDialogWrap.find("a[data-name='selectProBtn']").on("click",function(){t.createModifyProDialog()}),t.editDialogWrap.find(".t-close,.Cancel").on("click",function(){t.editDialog.close().remove()}),t.editDialogWrap.find(".Save").on("click",function(){function e(t){var e=!0;return $.each(t,function(t,o){if(""==o.picurl)return void(e=!1)}),e}function o(){var t=[];return $.each(c.piclist,function(e,o){var a=$.Deferred();t.push(a);var i=o.picurl;if(""==i||!i)return!0;var n=new Image;n.onload=function(){a.resolve(this.height)},n.onerror=function(){a.resolve(0)},n.src=i}),t}var i=t.editDialogWrap.find("#picList li"),n=t.editDialogWrap.find(".layout-info:first .radioCon:first").hasClass("curRadioBox")?1:2,r=t.editDialogWrap.find(".layout-info:eq(1) #transitionDiv select").val(),l=1e3*t.editDialogWrap.find(".layout-info:eq(1) #pauseDiv select").val(),d=[];if(d=$.map(i,function(t){if(""!=$.trim($(t).find(".inputW220 input").val())||""!=$.trim($(t).find(".inputW210 input").val())){var e=$.trim($(t).find(".inputW210 input").val()),o=a.parseURL(e);return e=/hc360.com$/.test(o.host.toLowerCase())?o.source:"",{picurl:$.trim($(t).find(".inputW220 input").val()),linkurl:e}}}),!e(d))return t.createDialog("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u56fe\u7247\u5730\u5740"),!1;if(1==n&&d.length<1)return t.createDialog("\u8bf7\u4e0a\u4f20\u4e0d\u5c11\u4e8e1\u5f20\u7ffb\u9875\u56fe\u7247"),!1;if(2==n&&t.copy_moduleData.data.prolist.length<1)return t.createDialog("\u60a8\u8fd8\u672a\u6dfb\u52a0\u4ea7\u54c1\uff01"),!1;var s={type:n,transition:r,pause:l,piclist:d};$.extend(t.copy_moduleData.data,s);var c=$.extend(!0,{},t.copy_moduleData.data);$.each(c.prolist,function(t,e){/(\.){2}/g.test(e.picurl)&&(e.picurl=e.picurl.split(/(\.){2}/g)[0])}),$.when.apply(null,o()).done(function(){var e=Math.max.apply(null,arguments);if(e&&0!=e){var o=e+"px";$.extend(c,{height:o})}else $.extend(c,{height:""});t.module.update({data:c},function(){t.editDialog.close().remove()})})}),t.editDialogWrap.find("#previewBtn").on("click",function(){function e(t){var e=!0;return $.each(t,function(t,o){if(""==o.picurl)return void(e=!1)}),e}var o=$(this),a=t.editDialogWrap.find("#picList li"),i=t.editDialogWrap.find(".layout-info:first .radioCon:first").hasClass("curRadioBox")?1:2,n=t.editDialogWrap.find(".layout-info:eq(1) #transitionDiv select").val(),r=1e3*t.editDialogWrap.find(".layout-info:eq(1) #pauseDiv select").val(),l=[];if(l=$.map(a,function(t){if(""!=$.trim($(t).find(".inputW220 input").val())||""!=$.trim($(t).find(".inputW210 input").val()))return{picurl:$.trim($(t).find(".inputW220 input").val()),linkurl:$.trim($(t).find(".inputW210 input").val())}}),!e(l))return t.createDialog("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u56fe\u7247\u5730\u5740"),!1;if(1==i&&l.length<1)return t.createDialog("\u8bf7\u4e0a\u4f20\u4e0d\u5c11\u4e8e1\u5f20\u7ffb\u9875\u56fe\u7247"),!1;var d={type:i,transition:n,pause:r,piclist:l};$.extend(t.copy_moduleData.data,d);var s=$.extend(!0,{},t.copy_moduleData.data);$.each(s.prolist,function(t,e){/(\.){2}/g.test(e.picurl)&&(e.picurl=e.picurl.split(/(\.){2}/g)[0])}),1==i?(delete s.prolist,s.piclist.length>0&&$.each(s.piclist,function(t,e){""==$.trim(e.linkurl)&&delete e.linkurl})):2==i&&(delete s.piclist,s.prolist.length>0&&$.each(s.prolist,function(t,e){delete e.bcname}));var c=encodeURIComponent(JSON.stringify(s)),p="//style.org.hc360.cn/js/module/shop3.0/dist/backend/preview/module_ads.html?"+c;o.attr("target","_blank"),o.attr("href",p)})},uploadImgFunc:function(){var t=this,e=$.extend({},t.webuploderObj,{pick:t.editDialogWrap.find("[data-class='custom_uploadBtn']").selector,compress:{width:1920,height:1080}}),o=webuploader.create(e);o.on("error",function(e){"Q_TYPE_DENIED"==e?t.createDialog("\u53ea\u80fd\u4e0a\u4f20jpg\u3001jpeg\u3001gif\u3001png\u683c\u5f0f\u7684\u56fe\u7247"):"Q_EXCEED_SIZE_LIMIT"==e||"F_EXCEED_SIZE"==e?t.createDialog("\u4e0a\u4f20\u56fe\u7247\u4e0d\u80fd\u8d85\u8fc75M"):t.createDialog("\u4e0a\u4f20\u5931\u8d25\u8bf7\u91cd\u65b0\u4e0a\u4f20\uff01")}),o.on("uploadSuccess",function(e,o){if(0==o.state)return t.createDialog(o.message),!1;var a=$("#rt_"+e.source.ruid);a.length&&a.closest("li").find('input[type="text"]:first').val(o.result.url)})},createModifyProDialog:function(){var t=this;t.modifyProDialogWrap.find("[data-name='singleModifyDiv']").show(),t.modifyProDialogWrap.find("[data-name='batchModifyDiv']").hide(),t.modifyProDialog=dialog({title:"\u7f16\u8f91\u5185\u5bb9>\u5355\u5f20\u56fe\u7247\u4fee\u6539",content:t.modifyProDialogWrap.html(),onclose:function(){t.modifyProDialog.copy_moduleData=null,t.selectCount=t.copy_moduleData.data.prolist.length,$(t.modifyProDialog.node).find("#imgContainer").length>0&&$(t.modifyProDialog.node).find("#imgContainer").remove(),t.jcrop&&t.jcrop.destroy(),$("#previewContainer").remove(),t.picParam=""}}).showModal(),t.options.rendedCallback&&t.options.rendedCallback.call(t),t.modifyProDialog.copy_moduleData=$.extend(!0,{},t.copy_moduleData),t.picCropperDiv=$(t.modifyProDialog.node).find("div[data-name='picCropperDiv']"),t.closeAndCancelDialogBtn_modify=$(t.modifyProDialog.node).find(".t-close,.Cancel"),t.batchUploadBtn=$(t.modifyProDialog.node).find("[data-name='batchUploadProBtn']"),t.proListContainer=$(t.modifyProDialog.node).find("#proListContainer"),t.batchProListContainer=$(t.modifyProDialog.node).find("#batchProListContainer"),t.saveProListBtn=$(t.modifyProDialog.node).find(".Save"),t.linkUrlInput=$(t.modifyProDialog.node).find("#linkUrlInput"),t.bindModifyProDialogEvent()},bindModifyProDialogEvent:function(){var t=this,e=$.extend(!0,{},t.modifyProDialog.copy_moduleData);t.initSelectProList(e),$(t.modifyProDialog.node).on("click","#proListContainer li",function(){var e=$(this),o=e.siblings().find(".picbox a"),a=e.siblings().find(".changeImg a"),i=e.find(".picbox a").attr("data-href");i="javascript:;"==$.trim(i)?"":i,e.find(".picbox a").addClass("boxBlueBor"),e.find(".changeImg a").addClass("cBtnCur"),o.removeClass("boxBlueBor"),a.removeClass("cBtnCur"),t.linkUrlInput.val(i),$(t.modifyProDialog.node).find("span[data-name='uploadType']:eq(0)").addClass("curradioImg"),$(t.modifyProDialog.node).find("span[data-name='uploadType']:eq(1)").removeClass("curradioImg"),e.find(".changeImg a").attr("data-bcid")?($(t.modifyProDialog.node).find('li[data-flag="picModify"]').show(),$(t.modifyProDialog.node).find('div[data-name="picCropperDiv"]').hide(),t.linkUrlInput.parent().hide()):($(t.modifyProDialog.node).find('li[data-flag="picModify"]').hide(),$(t.modifyProDialog.node).find('div[data-name="picCropperDiv"]').hide(),t.linkUrlInput.parent().hide()),t.jcrop&&t.jcrop.destroy(),$("#previewContainer").remove(),$(t.modifyProDialog.node).find("#imgContainer").length>0&&$(t.modifyProDialog.node).find("#imgContainer").remove(),t.picParam=""}),$(t.modifyProDialog.node).find("div[data-name='switchType'] a").on("click",function(){var e=$(this),o=e.attr("data-name"),a=e.siblings("a").attr("data-name");e.addClass("changeImgBtn").removeClass("insertImgBtn").siblings("a").removeClass("changeImgBtn").addClass("insertImgBtn"),$("div[data-name='"+o+"Div']").show(),$("div[data-name='"+a+"Div']").hide();var i=$.extend(!0,{},t.modifyProDialog.copy_moduleData);t.initSelectProList(i),$(t.modifyProDialog.node).find("span[data-name='uploadType']:eq(0)").addClass("curradioImg"),$(t.modifyProDialog.node).find("span[data-name='uploadType']:eq(1)").removeClass("curradioImg"),$(t.modifyProDialog.node).find('li[data-flag="picModify"]').hide(),$(t.modifyProDialog.node).find('div[data-name="picCropperDiv"]').hide(),$(t.modifyProDialog.node).find("#linkUrlInput").parent().hide(),t.jcrop&&t.jcrop.destroy(),$("#previewContainer").remove()}),$(t.modifyProDialog.node).find("span[data-name='uploadType']").on("click",function(){var e=$(this),o=e.closest("ul"),a=e.closest("li");e.addClass("curradioImg"),a.siblings().find("span[data-name='uploadType']").removeClass("curradioImg"),a.is(o.children(":last"))?(t.picCropperDiv.show(),$(t.modifyProDialog.node).find("#linkUrlInput").parent().show()):(t.picCropperDiv.hide(),$(t.modifyProDialog.node).find("#linkUrlInput").parent().hide()),$(t.modifyProDialog.node).find("[data-type='orginal']").addClass("curradioImg"),$(t.modifyProDialog.node).find("[data-type='cropper']").removeClass("curradioImg").hide(),t.jcrop&&t.jcrop.destroy(),$("#previewContainer").remove(),$(t.modifyProDialog.node).find("#imgContainer").length>0&&$(t.modifyProDialog.node).find("#imgContainer").remove(),t.picParam=""}),$(t.modifyProDialog.node).find("span[data-name='uploadType']").siblings().on("click",function(){var e=$(this),o=e.siblings("span");if(!o.hasClass("curradioImg"))return!1;if(!t.proListContainer.find(".changeImg a").hasClass("cBtnCur"))return t.createDialog("\u8bf7\u5148\u9009\u62e9\u8981\u4fee\u6539\u7684\u4ea7\u54c1"),!1;if("selectProUpload"==e.attr("data-name")){var a=t.proListContainer.find(".changeImg a[class='cBtnCur']").closest("li");t.createSingleProDialog(t.proSingleDialogWrap,a)}}),t.locateUploadPic(),$(t.modifyProDialog.node).find("#locatePicSave").on("click",function(){var e=t.proListContainer.find(".changeImg a[class='cBtnCur']").closest("li"),o=e.find(".changeImg a").attr("data-bcid"),a=$(t.modifyProDialog.node).find("#imgContainer"),i=$(t.modifyProDialog.node).find("[data-name='load_pic_type'] span").filter(".curradioImg").attr("data-type"),n=a.attr("src");if(!n)return t.createDialog("\u8bf7\u5148\u4e0a\u4f20\u56fe\u7247"),!1;if("cropper"==i)if(t.picParam){var r={leftUpX:t.picParam.x,leftUpY:t.picParam.y,rightDownX:t.picParam.x2,rightDownY:t.picParam.y2,fileURL:n,picstr:$.trim($("#picstr").val())||"",operType:"upload",actType:"crop"};$.ajax({type:"GET",url:"//imgup.b2b.hc360.com/imgup/turbine/action/imgup.PicManagementAction/eventsubmit_doPerform/ddd",dataType:"jsonp",jsonp:"callback",data:r,success:function(a){if(a.state){e.find(".picbox img").attr("src",a.result.url);var i;$.each(t.modifyProDialog.copy_moduleData.data.prolist,function(t,e){if(e.bcid==o)return i=t,!1});var n=$.extend(t.modifyProDialog.copy_moduleData.data.prolist[i],{picurl:a.result.url});t.modifyProDialog.copy_moduleData.data.prolist.splice(i,1,n)}else t.createDialog(a.error.message)},error:function(){t.createDialog("\u6587\u4ef6\u4fdd\u5b58\u5931\u8d25\uff01")}})}else{e.find(".picbox img").attr("src",n);var l;$.each(t.modifyProDialog.copy_moduleData.data.prolist,function(t,e){if(e.bcid==o)return l=t,!1});var d=$.extend(t.modifyProDialog.copy_moduleData.data.prolist[l],{picurl:n});t.modifyProDialog.copy_moduleData.data.prolist.splice(l,1,d)}else{e.find(".picbox img").attr("src",n);var l;$.each(t.modifyProDialog.copy_moduleData.data.prolist,function(t,e){if(e.bcid==o)return l=t,!1});var d=$.extend(t.modifyProDialog.copy_moduleData.data.prolist[l],{picurl:n});t.modifyProDialog.copy_moduleData.data.prolist.splice(l,1,d),t.picParam=""}}),t.linkUrlInput.on("blur",function(){var e=$(this),o=t.proListContainer.find(".changeImg a[class='cBtnCur']").closest("li");if(0==o.length)return!1;var a=o.find(".picbox a").attr("data-href"),i=o.find(".changeImg a").attr("data-bcid"),n=t.validateProLinkUrl(a,$.trim(e.val()));o.find(".picbox a").attr("data-href",n);var r;$.each(t.modifyProDialog.copy_moduleData.data.prolist,function(t,e){if(e.bcid==i)return r=t,!1});var l=$.extend(t.modifyProDialog.copy_moduleData.data.prolist[r],{linkurl:n});t.modifyProDialog.copy_moduleData.data.prolist.splice(r,1,l)}),$(t.modifyProDialog.node).find("[data-name='batchUploadProBtn']").on("click",function(){t.createBatchProDialog(t.proBatchDialogWrap)}),t.saveProListBtn.on("click",function(){return t.isSaveProList=!0,t.modifyProDialog.copy_moduleData&&t.modifyProDialog.copy_moduleData.data.prolist.length<3?(t.createDialog("\u8f6e\u64ad\u4ea7\u54c1\u4e0d\u80fd\u5c11\u4e8e3\u4e2a\uff01\u8bf7\u8865\u8db3"),!1):(t.copy_moduleData.data.prolist=t.modifyProDialog.copy_moduleData.data.prolist.slice(0,t.modifyProDialog.copy_moduleData.data.prolist.length),t.modifyProDialog.close().remove(),t.jcrop&&t.jcrop.destroy(),$("#previewContainer").remove(),$(t.modifyProDialog.node).find("#imgContainer").length>0&&$(t.modifyProDialog.node).find("#imgContainer").remove(),void(t.picParam=""))}),t.closeAndCancelDialogBtn_modify.on("click",function(){t.isSaveProList=!1,t.modifyProDialog.copy_moduleData=null,t.selectCount=t.copy_moduleData.data.prolist.length,t.jcrop&&t.jcrop.destroy(),$("#previewContainer").remove(),$(t.modifyProDialog.node).find("#imgContainer").length>0&&$(t.modifyProDialog.node).find("#imgContainer").remove(),t.picParam="",t.modifyProDialog.close().remove()})},locateUploadPic:function(){var t=this,e=$.extend({},t.webuploderObj,{compress:!1,pick:$(t.modifyProDialog.node).find("a[data-name='locateUpload']").selector}),o=webuploader.create(e);o.on("error",function(e){"Q_TYPE_DENIED"==e?t.createDialog("\u53ea\u80fd\u4e0a\u4f20jpg\u3001jpeg\u3001gif\u3001png\u683c\u5f0f\u7684\u56fe\u7247"):"Q_EXCEED_SIZE_LIMIT"==e||"F_EXCEED_SIZE"==e?t.createDialog("\u4e0a\u4f20\u56fe\u7247\u4e0d\u80fd\u8d85\u8fc75M"):t.createDialog("\u4e0a\u4f20\u5931\u8d25\u8bf7\u91cd\u65b0\u4e0a\u4f20\uff01")}),o.on("uploadSuccess",function(e,o){if(0===o.state)return t.createDialog(o.message),!1;var a="";a=t.picCropperDiv.find("#imgContainer").length>0?t.picCropperDiv.find("#imgContainer"):$("<img>",{id:"imgContainer"}).appendTo(t.picCropperDiv.find(".cutImg p")),a.attr("src",o.result.url),t.getImageWidth(o.result.url,function(e,o){var a=e,i=o;t.picCropperDiv.find("#imgContainer").closest(".cutImg").width(),t.picCropperDiv.find("#imgContainer").closest(".cutImg").height();$(t.modifyProDialog.node).find("[data-type='cropper']").show(),t.orginalOrCropFun(a,i)})})},orginalOrCropFun:function(t,e){var o=this;o.picCropperDiv.find(".radioImg").unbind("click").on("click",function(){function i(e){var a=t/s;if(o.picParam={x:e.x*a,y:e.y*a,x2:e.x2*a,y2:e.y2*a},parseInt(e.w)>0){var i=m/e.w,n=f/e.h;u.css({width:Math.round(i*s)+"px",height:Math.round(n*c)+"px",marginLeft:"-"+Math.round(i*e.x)+"px",marginTop:"-"+Math.round(n*e.y)+"px"})}}function n(o){var i=o.attr("src"),n=o.parent().offset().top,r=o.parent().offset().left,l="<div class='preview-box' id='previewContainer'><img class='jcrop-preview'  src="+i+" ></div>";$(l).css({position:"absolute",left:r+404+"px",top:n+60+"px",width:"280px",height:"280px","z-index":1100,overflow:"hidden"}).appendTo("body"),a.resizeImage($("#previewContainer").find("img"),t,e,280,280)}var r=$(this),l=r.closest("li").siblings("li").find(".radioImg");r.addClass("curradioImg"),l.hasClass("curradioImg")&&l.removeClass("curradioImg");var d=$(o.modifyProDialog.node).find("#imgContainer");if(o.jcrop&&o.jcrop.destroy(),$("#previewContainer").remove(),"cropper"==r.attr("data-type")){if(!d.attr("src"))return o.createDialog("\u8bf7\u5148\u4e0a\u4f20\u56fe\u7247\u518d\u88c1\u526a"),!1;n(d);var s,c,p,u,m,f,g=o.picCropperDiv.find(".cutImg p");p=$("#previewContainer"),u=p.find("img"),m=p.width(),f=p.height(),d.Jcrop({boxWidth:g.width(),boxHeight:g.height(),bgFade:!0,bgOpacity:.5,aspectRatio:1,onChange:i,onSelect:i},function(){o.jcrop=this;var t=o.jcrop.getBounds();s=t[0],c=t[1];var e=$(".jcrop-holder");e.css({left:Math.abs(g.width()-e.width())/2})})}else o.jcrop&&o.jcrop.destroy(),$("#previewContainer").remove(),d.removeAttr("style")})},initSelectProList:function(t){for(var e=this,o=e.selectCount;o<6;)t.data.prolist.push({picurl:"//style.org.hc360.com/images/detail/mysite/siteconfig/newPro/nPicImg.jpg",linkurl:"javascript:;"}),o++;e.renderDataToHtml(e.proListContainer,e.tempHtml.initSinglePro,t.data),e.renderDataToHtml(e.batchProListContainer,e.tempHtml.initBatchPro,t.data)},createSingleProDialog:function(t,e){var o=this;$.when(o.getOnSaleData(o.pageData)).done(function(a){o.createOnSaleHtml(a,t),o.proSingleDialog=dialog({title:"\u7f16\u8f91\u5185\u5bb9>\u5355\u5f20\u56fe\u7247\u4fee\u6539",content:o.proSingleDialogWrap.html()}).showModal(),o.options.rendedCallback&&o.options.rendedCallback.call(o),$(o.proSingleDialog.node).find(".t-close").on("click",function(){o.proSingleDialog.close().remove()}),o.selectSingleProFunc(e),o.initPagnation(a.data.procount,o.proSingleDialog.node,t),o.filterProFunc(o.proSingleDialog.node,o.proSingleDialogWrap)}).fail(function(t){})},createBatchProDialog:function(t){var e=this;$.when(e.getOnSaleData(e.pageData),e.getOnSelectData()).done(function(o){e.createOnSaleHtml(o[0],t),e.proBatchDialog=dialog({title:"\u7f16\u8f91\u5185\u5bb9>\u7f16\u8f91\u5185\u5bb9>\u6279\u91cf\u63d2\u5165\u4ea7\u54c1>\u9009\u62e9\u4ea7\u54c1\u56fe\u7247",content:e.proBatchDialogWrap.html()}).showModal(),e.options.rendedCallback&&e.options.rendedCallback.call(e),$(e.proBatchDialog.node).find(".t-close,.Cancel").on("click",function(){e.proBatchDialog.close().remove()}),e.selectBatchProFunc(),e.cancelBatchProFunc(),e.initPagnation(o[0].data.procount,e.proBatchDialog.node),e.filterProFunc(e.proBatchDialog.node,e.proBatchDialogWrap),e.saveBatchProFunc()}).fail(function(t){})},getOnSaleData:function(t){return $.ajax({type:"GET",dataType:"jsonp",jsonp:"callback",url:"/detail/turbine/action/GetSelectProductListAction/eventsubmit_doBusinchance/doBusinchance",data:t})},getOnSelectData:function(){var t=this,e=$.Deferred(),o=$.extend(!0,{},t.modifyProDialog.copy_moduleData);return t.selectCount=o.data.prolist.length,0==t.selectCount?(t.proBatchDialogWrap.find(".seleRight dd").html("\u60a8\u53ef\u4ee5\u9009\u62e9<span>"+t.totalCount+"\u6761</span>\u4ea7\u54c1\u663e\u793a\u5728\u6269\u5c55\u6a71\u7a97"),t.proBatchDialogWrap.find("#noProListTip").show(),t.proBatchDialogWrap.find("#ProListDiv").hide()):(t.proBatchDialogWrap.find(".seleRight dd").html("\u60a8\u53ef\u4ee5\u9009\u62e9<b id='total_count'>"+t.totalCount+"\u6761</b>\uff0c\u5df2\u9009\u62e9<span  id='select_count'>"+t.selectCount+"\u6761</span>"),t.proBatchDialogWrap.find("#noProListTip").hide(),t.proBatchDialogWrap.find("#ProListDiv").show()),t.renderDataToHtml(t.proBatchDialogWrap.find("#ProListDiv ul"),t.tempHtml.isSelectPro,o.data),e.resolve(),e},createOnSaleHtml:function(t,e,o,a){var i=this;1==t.state?t.data.prolist&&t.data.prolist.length>0?($.each(t.data.prolist,function(t,e){var o="";o=a&&"object"==typeof a&&a.prolist.length>=0?a:i.modifyProDialog.copy_moduleData.data,$.each(o.prolist,function(t,o){if(e.bcid==o.bcid)return e.isSelect=!0,!1})}),e.find(".seleList p").length>0?(e.find(".seleList > p").remove(),0==e.find(".seleListCon dl").length&&e.find(".seleList").prepend('<dl><dt><span class="seleTit1">\u4ea7\u54c1\u4fe1\u606f</span><span class="seleTit2">\u64cd\u4f5c</span></dt></dl><div class="seleListCon"><dl></dl></div>'),i.renderDataToHtml(e.find(".seleListCon dl"),i.tempHtml.selectPro,t.data)):i.renderDataToHtml(e.find(".seleListCon dl"),i.tempHtml.selectPro,t.data)):o&&"search"==o?e.find(".seleList").html('<p class="sLeftPrompt">\u672a\u641c\u7d22\u5230\u76f8\u5173\u5546\u54c1</p>'):e.find(".seleList").html('<p class="sLeftPrompt">\u5546\u94fa\u4e2d\u6682\u65e0\u5728\u552e\u5546\u54c1\uff0c<a href="http://my.b2b.hc360.com/my/turbine/template/corcenter%2Cbusiness%2Cbusinonsale.html" target="_blank">\u8bf7\u8865\u5145</a></p>'):i.createDialog(t.message)},selectSingleProFunc:function(t){var e=this;$(e.proSingleDialog.node).on("click",'button[type="submit"][data-bcid]',function(){var o=$(this);if(!o.hasClass("gBtn2")){var a=o.parent().siblings(".picboxTit").text(),i=o.parent().siblings(".picbox").find("img").attr("src"),n=o.attr("data-bcid"),r="//b2b.hc360.com/supplyself/"+n+".html",l={bcid:n,bcname:a,picurl:i,linkurl:r},d=t.find("a[data-bcid]").attr("data-bcid");if(d){var s;$.each(e.modifyProDialog.copy_moduleData.data.prolist,function(t,e){if(e.bcid==d)return s=t,!1}),e.modifyProDialog.copy_moduleData.data.prolist.splice(s,1,l)}else e.selectCount++,e.modifyProDialog.copy_moduleData.data.prolist.push(l);$(this).addClass("gBtn2").text("\u5df2\u9009\u62e9"),e.proSingleDialog.close().remove(),$(e.modifyProDialog.node).find('li[data-flag="picModify"]').hide(),e.renderDataToHtml(t,e.tempHtml.initSinglePro,{prolist:[l]},"replace")}})},selectBatchProFunc:function(){var t=this;$(t.proBatchDialog.node).on("click",'button[type="submit"][data-bcid]',function(){var e=$(this);if(t.selectCount==t.totalCount)return t.createDialog("\u60a8\u9009\u62e9\u7684\u4ea7\u54c1\u6570\u5df2\u8fbe\u4e0a\u9650"),!1;if(!e.hasClass("gBtn2")){var o=e.parent().siblings(".picboxTit").text(),a=e.parent().siblings(".picbox").find("img").attr("src"),i=e.attr("data-bcid"),n={prolist:[{bcid:i,picurl:a,bcname:o}]};t.proBatchDialogWrap.find("#ProListDiv").is(":hidden")&&($(t.proBatchDialog.node).find(".seleRight dd").html("\u60a8\u53ef\u4ee5\u9009\u62e9<b id='total_count'>"+t.totalCount+"\u6761</b>\uff0c\u5df2\u9009\u62e9<span id='select_count'>1\u6761</span>"),$(t.proBatchDialog.node).find("#noProListTip").hide(),$(t.proBatchDialog.node).find("#ProListDiv").show()),t.renderDataToHtml($(t.proBatchDialog.node).find("#ProListDiv ul"),t.tempHtml.isSelectPro,n,"append"),$(this).addClass("gBtn2").text("\u5df2\u9009\u62e9"),t.selectCount++,$(t.proBatchDialog.node).find("#select_count").text(t.selectCount+"\u6761")}})},cancelBatchProFunc:function(){var t=this;$(t.proBatchDialog.node).find(".seleRight").on("click","em[data-bcid]",function(){var e=$(this),o=e.attr("data-bcid");return!!t.selectCount&&(t.selectCount--,t.selectCount>0?$(t.proBatchDialog.node).find("#select_count").text(t.selectCount+"\u6761"):($(t.proBatchDialog.node).find("#ProListDiv").hide(),$(t.proBatchDialog.node).find(".seleRight dd").html("\u60a8\u53ef\u4ee5\u9009\u62e9<span>"+t.totalCount+"\u6761</span>\u4ea7\u54c1\u663e\u793a\u5728\u6269\u5c55\u6a71\u7a97"),$(t.proBatchDialog.node).find("#noProListTip").show()),e.closest("li").remove(),void $("button[type='submit'][data-bcid="+o+"]").removeClass("gBtn2").text("\u9009\u62e9"))})},saveBatchProFunc:function(){var t=this,e=$.extend(!0,{},t.modifyProDialog.copy_moduleData);$(t.proBatchDialog.node).find(".Save").on("click",function(){var o=[];$(t.proBatchDialog.node).find("#ProListDiv").is(":visible")&&(o=$.map($(t.proBatchDialog.node).find("#ProListDiv li"),function(t){return{bcid:$(t).find("em").attr("data-bcid"),bcname:$(t).find(".picboxTit").text(),picurl:$(t).find("img").attr("src"),linkurl:$(t).find("a").attr("href")}})),e.data.prolist=o,t.modifyProDialog.copy_moduleData.data.prolist=o.slice(0,o.length);for(var a=t.selectCount;a<6;)e.data.prolist.push({picurl:"//style.org.hc360.com/images/detail/mysite/siteconfig/newPro/nPicImg.jpg",linkurl:"javascript:;"}),a++;t.renderDataToHtml(t.batchProListContainer,t.tempHtml.initBatchPro,e.data),t.proBatchDialog.close().remove()})},initPagnation:function(t,e){var o=this,a="";if(t<o.pageData.pagesize||t==o.pageData.pagesize)return $(e).find(".pageList").length>0&&$(e).find(".pageList").remove(),!1;var a=$(e).find(".pageList").length>0?$(e).find(".pageList"):$("<div>",{"class":"pageList"}).appendTo($(e).find(".seleList"));a.pagination(t,{num_display_entries:5,link_to:"#p__id__",items_per_page:o.pageData.pagesize,prev_text:"&nbsp;",next_text:"&nbsp;",load_first_page:!1,callback:function(t){var a={pageindex:t+1,productname:encodeURIComponent($.trim($(e).find("[data-name='filterText']").val()))||""},i=$.extend({},o.pageData,a);$.when(o.getOnSaleData(i)).done(function(t){var a={prolist:[]};$(e).find(".seleRight").length>0&&$(o.proBatchDialog.node).find("#ProListDiv").is(":visible")&&(a.prolist=$.map($(o.proBatchDialog.node).find("#ProListDiv li"),function(t){return{bcid:$(t).find("em").attr("data-bcid"),bcname:$(t).find(".picboxTit").text(),picurl:$(t).find("img").attr("src"),linkurl:$(t).find("a").attr("href")}})),o.createOnSaleHtml(t,$(e),"",a),$(e).find(".seleListCon").scrollTop(0)})}})},filterProFunc:function(t,e){var o=this;$(t).find("button[data-name='searchBtn']").on("click",function(){var a=$.trim($(t).find("input[data-name='filterText']").val()),i={productname:encodeURIComponent(a)},n=$.extend({},i,o.pageData);$.when(o.getOnSaleData(n)).done(function(a){var i={prolist:[]};$(t).find(".seleRight").length>0&&$(o.proBatchDialog.node).find("#ProListDiv").is(":visible")&&(i.prolist=$.map($(o.proBatchDialog.node).find("#ProListDiv li"),function(t){return{bcid:$(t).find("em").attr("data-bcid"),bcname:$(t).find(".picboxTit").text(),picurl:$(t).find("img").attr("src"),linkurl:$(t).find("a").attr("href")}})),o.createOnSaleHtml(a,$(t),"search",i),o.initPagnation(a.data.procount,t,e)})})},renderDataToHtml:function(t,e,o,a){var i=mustache.render(e,o);"replace"==a?t.replaceWith(i):"append"==a?t.append(i):t.html(i)},validateProLinkUrl:function(t,e){if(!e||""==e)return t;var o=a.parseURL(e);return/hc360.com$/.test(o.host.toLowerCase())?o.source:t},createDialog:function(t){dialog({title:"\u63d0\u793a",content:t,okValue:"\u786e\u5b9a",ok:function(){return this.close().remove(),!1}}).showModal()},getImageWidth:function(t,e){var o=new Image;o.onload=function(){e(this.width,this.height)},o.src=t},loadComponents:function(){var t=$.Deferred(),e=$.Deferred(),a=$.Deferred(),i=$.Deferred(),n=$.Deferred(),r=$.Deferred();return o.e(3,function(e){o(54),t.resolve()}),o.e(4,function(t){o(56),e.resolve()}),o.e(5,function(t){o(57),a.resolve()}),o.e(6,function(t){o(59),i.resolve()}),o.e(7,function(t){o(61),n.resolve()}),o.e(1,function(t){o(44),r.resolve()}),[t,e,a,i,n,r]}},t.exports=i},62:function(t,e){var o=function(t,e,o){var a=this;a.module=t,a.moduleBox=t.htmlEntity,a.moduleData=t.dataEntity,a.editDialog=dialog({content:e,title:"\u7f16\u8f91\u5185\u5bb9>\u76f8\u518c\u6a71\u7a97"}).showModal(),a.options=o||{},a.options.rendedCallback&&a.options.rendedCallback.call(a),a.closeAndCancelDialogBtn=$(a.editDialog.node).find(".t-close,.Cancel"),a.saveDialogBtn=$(a.editDialog.node).find(".Save"),a.showTitleAndBorderRadio=$(a.editDialog.node).find("#titleAndBorder_albWin"),
a.titleInput=$(a.editDialog.node).find("input[name='title']"),a.initModuleData(),a.operateModuleData()};o.prototype={initModuleData:function(){var t=this;t.titleInput.val(t.moduleData.data.title);var e=parseInt(t.moduleData.data.showTitleAndBorder)||0;e?t.showTitleAndBorderRadio.addClass("curChosen"):t.showTitleAndBorderRadio.removeClass("curChosen")},operateModuleData:function(){var t=this;t.closeAndCancelDialogBtn.on("click",function(){t.editDialog.close().remove()}),t.showTitleAndBorderRadio.on("click",function(){$(this).toggleClass("curChosen")}),t.saveDialogBtn.on("click",function(){var e=$.trim(t.titleInput.val()),o=t.showTitleAndBorderRadio.hasClass("curChosen")?1:0;if(0===e.length)return dialog({title:"\u63d0\u793a",content:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01",okValue:"\u786e\u5b9a",ok:function(){this.close().remove()}}).showModal(),!1;var a={operatetype:2,operatedata:{providerid:pageEntity.providerid,username:pageEntity.username,data:{title:e,showTitleAndBorder:o}}};a.operatedata=$.extend(t.moduleData,a.operatedata),t.module.update({data:a.data},function(){t.editDialog.close().remove()})})}},t.exports=o},63:function(t,e,o){function a(t,e,o){var a=this;a.html=e,a.moduleEntity=t,a.formData=$.extend(!0,{},t.dataEntity.data),a.options=$.extend({webuploader:{server:"//imgup.b2b.hc360.com/imgup/turbine/action/imgup.PicManagementAction/eventsubmit_doPerform/ddd",formData:{operType:"upload",picstr:$("#picstr").val()||"",widthHeightLimitFlag:1,widthMinLimit:"0",widthMaxLimit:"952",heightMinLimit:"0",heightMaxLimit:"800"},fileVal:"file",pick:{multiple:!1},accept:{title:"Images",extensions:"gif,jpg,jpeg",mimeTypes:"image/gif,image/jpg,image/jpeg"},threads:1,compress:!1,swf:"//style.org.hc360.cn/js/module/shop3.0/dist/components/webuploader/webuploader.swf?t="+Math.random(),disableGlobalDnd:!0,fileSizeLimit:5242880,duplicate:!0,auto:!1}},o||{});var i=a.getComponentDeferred();$.when.apply(null,i).done(function(){a.init()})}var i=o(53);a.prototype.init=function(){var t=this;t.dialogEntity=dialog({content:t.html,title:"\u7f16\u8f91\u5185\u5bb9>\u6269\u5c55\u5e7f\u544a"}).showModal(),t.options.rendedCallback&&t.options.rendedCallback.call(t),$(t.dialogEntity.node).find("[data-element-name]").each(function(e,o){var a=$.trim($(o).attr("data-element-name"));a&&!t[a]&&(t[a]=$('[data-element-name="'+a+'"]'))}),t.wrapUnselected.show(),t.wrapSelected.hide(),t.imgAD.removeAttr("src"),$.trim(t.formData.picurl)&&(t.wrapUnselected.hide(),t.wrapSelected.show(),t.imgAD.attr("src",t.formData.picurl),t.btnPreview.attr({href:t.formData.picurl,target:"_blank"})),t.txtLink.val(""),$.trim(t.formData.linkurl)&&t.txtLink.val(t.formData.linkurl),t.wrapUpload.hide(),t.bindEvent()},a.prototype.bindEvent=function(){var t=this;if(t.btnShowSelectArea.click(function(e){t.wrapUnselected.hide(),t.imgTitle.html("\u672a\u9009\u62e9\u4efb\u4f55\u6587\u4ef6"),t.wrapUpload.show()}),t.btnHideSelectArea.click(function(e){t.wrapUnselected.show(),t.wrapUpload.hide()}),t.btnSave.click(function(e){if(t.formData.linkurl=t.txtLink.val(),!t.validate())return!1;var o={operatetype:2,operatedata:{providerid:pageEntity.providerid,username:pageEntity.username,data:{picurl:t.formData.picurl,linkurl:t.formData.linkurl}}};arguments.callee;o.operatedata=$.extend({},t.moduleEntity.dataEntity,o.operatedata),t.moduleEntity.update({data:o.operatedata.data},function(){t.dialogEntity.remove()})}),t.btnCancel.click(function(e){t.dialogEntity.remove(),t.webuploaderEntity&&t.webuploaderEntity.destroy()}),t.btnUpload.click(function(e){return 0===t.webuploaderEntity.getFiles().length?void dialog({title:"\u63d0\u793a",content:"\u672a\u9009\u62e9\u4efb\u4f55\u6587\u4ef6",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal():void(t.webuploaderEntity&&t.webuploaderEntity.upload())}),t.detectBrowserSupport()){var e=$.extend(t.options.webuploader,{pick:{id:t.btnSelect.selector}});t.webuploaderEntity=webuploader.create(e),t.webuploaderEntity.on("fileQueued",function(e){t.imgTitle.html(e.name)}),t.webuploaderEntity.on("uploadAccept",function(e,o){var a=o||{},i=!1;return"true"===a.state?(t.formData.picurl=a.result.url,t.imgAD.attr("src",a.result.url),t.btnPreview.attr({href:t.formData.picurl,target:"_blank"}),t.imgAD.parent().imgLiquid({fill:!1}),t.wrapSelected.show(),t.wrapUpload.hide()):t.webuploaderEntity.trigger("error","CUSTOM",a.error.message),i}),t.webuploaderEntity.on("error",function(){var t={Q_EXCEED_NUM_LIMIT:"\u4e0a\u4f20\u6587\u4ef6\u6570\u91cf\u8d85\u8fc7\u4e0a\u9650\uff01",Q_EXCEED_SIZE_LIMIT:"\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u4e0a\u9650\uff01",Q_TYPE_DENIED:"\u4e0a\u4f20\u6587\u4ef6\u7c7b\u578b\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u4e0a\u4f20\uff01",F_DUPLICATE:"\u4e0a\u4f20\u6587\u4ef6\u91cd\u590d\u4e86\u8bf7\u91cd\u65b0\u9009\u62e9\u4e0a\u4f20\uff01",OTHER:"\u4e0a\u4f20\u5931\u8d25\u8bf7\u91cd\u65b0\u4e0a\u4f20\uff01",CUSTOM:""},e=arguments[0]||"OTHER";dialog({title:"\u63d0\u793a",content:t[e]||arguments[1]||"",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal()})}},a.prototype.validate=function(){var t=this;if(!$.trim(t.formData.picurl))return dialog({title:"\u63d0\u793a",content:"\u8bf7\u4e0a\u4f20\u56fe\u7247\uff01",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal(),!1;if($.trim(t.formData.linkurl)){var e=i.parseURL(t.formData.linkurl);if(!/hc360.com$/.test(e.host.toLowerCase()))return dialog({title:"\u63d0\u793a",content:"\u4e0d\u80fd\u94fe\u63a5\u6167\u806a\u7f51\u4ee5\u5916\u5730\u5740\uff01",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal(),t.txtLink.val(""),!1;t.txtLink.val(e.source),t.formData.linkurl=e.source}return!0},a.prototype.getComponentDeferred=function(){var t=$.Deferred();o.e(5,function(e){o(57),t.resolve()});var e=$.Deferred();return o.e(1,function(t){o(44),e.resolve()}),[t,e]},a.prototype.detectBrowserSupport=function(){var t=this,e=function(){var t;try{t=navigator.plugins["Shockwave Flash"],t=t.description}catch(e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(o){t="0.0"}}return t=t.match(/\d+/g),parseFloat(t[0]+"."+t[1],10)}();return!webuploader.Uploader.support("flash")&&webuploader.browser.ie?(e?!function(t){window.expressinstallcallback=function(t){switch(t){case"Download.Cancelled":alert("\u60a8\u53d6\u6d88\u4e86\u66f4\u65b0\uff01");break;case"Download.Failed":alert("\u5b89\u88c5\u5931\u8d25");break;default:alert("\u5b89\u88c5\u5df2\u6210\u529f\uff0c\u8bf7\u5237\u65b0\uff01")}delete window.expressinstallcallback};var e="//style.org.hc360.cn/js/build/source/widgets/jqwebuploader/expressInstall.swf",o='<object type="application/x-shockwave-flash" data="'+e+'" ';webuploader.browser.ie&&(o+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),o+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+e+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',t.html(o)}(t.btnSelect):t.btnSelect.replaceWith($('<a href="//www.adobe.com/go/getflashplayer" target="_blank" border="0"><img alt="get flash player" src="//style.org.hc360.cn/js/build/source/widgets/jqwebuploader/getFlashPlayer.jpg" /></a>')),!1):!!webuploader.Uploader.support()||(dialog({title:"\u63d0\u793a",content:"\u56fe\u7247\u4e0a\u4f20\u7ec4\u4ef6\u4e0d\u652f\u6301\u60a8\u7684\u6d4f\u89c8\u5668\uff01",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal(),!1)},t.exports=a},64:function(t,e,o){var a=o(65),i=o(53),n=function(t,e,o){this.moduleEntity=t,this.moduleHtml=i.getTemplateFromHTML(e),this.pageNumber=40,this.proLimit=20,this.moduleData=$.extend(!0,{},this.moduleEntity.dataEntity.data),this.option=o||{};var a=this;a.def=this.loadComponents(),$.when.apply(null,this.def).done(function(){a.initLayer(e)})};n.prototype={initLayer:function(t){var e=this,o=e.moduleData.prolist.slice(0,e.proLimit),a={moduleData:e.moduleData,isShowTitle:1==e.moduleData.showTitleAndBorder,type:this.moduleData.type?this.moduleData.type:"1",picSize:this.moduleData.picsize?this.moduleData.picsize:"3",totalLen:o.length,isTile:function(){if(1==this.type)return"curRadioBox"},isRolling:function(){if(2==this.type)return"curRadioBox"},isSmallImg:function(){if(1==this.picSize)return"curRadioBox"},isMiddleImg:function(){if(2==this.picSize)return"curRadioBox"},isBigImg:function(){if(3==this.picSize)return"curRadioBox"}};e.option.rendedCallback&&e.option.rendedCallback.call(e),e.proWrapDialog=dialog({content:mustache.render(t,a),title:"\u7f16\u8f91\u5185\u5bb9>\u901a\u680f\u4ea7\u54c1"}).showModal(),e.bindEvent()},bindEvent:function(){var t=this;t.productsWrap=$(t.proWrapDialog.node),t.banProductWrap=t.productsWrap.find('[node-name="banProduct"]'),t.selectProBtn=t.banProductWrap.find('[node-name="selectPro"]'),t.banProductWrap.on("click",".Save",function(){t.saveModuleData()}),t.banProductWrap.on("click",".Cancel",function(){t.proWrapDialog.close().remove()}),t.banProductWrap.find(".chosen").click(function(){$(this).toggleClass("curChosen")}),t.banProductWrap.find(".radioCon").click(function(){$(this).hasClass("curRadioBox")||($(this).parents(".radioBoxNew").find(".radioCon").removeClass("curRadioBox"),$(this).addClass("curRadioBox"))}),t.selectProBtn.click(function(){$(this).data("isClick")||($(this).data("isClick",!0),t.proListLoding=dialog({content:'<span class="ui-dialog-loading">\u52a0\u8f7d\u4e2d..</span>'}).show(),t.proListLoding.addEventListener("close",function(){t.proListLoding=null,t.selectProBtn.data("isClick",!1)}),t.createProductDialog())})},saveModuleData:function(){var t=this,e=t.moduleData.prolist,o=$.trim(t.banProductWrap.find('[node-name="moduleTitle"]').val()),i=o.length;if(0==e.length)return void a.createDialog("\u60a8\u8fd8\u672a\u6dfb\u52a0\u4ea7\u54c1\uff01");if(0===i||i>5){var n=0==i?"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01":"\u6807\u9898\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e5\u4e2a\u5b57\u7b26\uff01";return void a.createDialog(n)}var r={title:o,showTitleAndBorder:t.banProductWrap.find(".chosen").hasClass("curChosen")?1:0,type:t.getShowType('[node-name="showType"]'),picsize:t.getPageSize('[node-name="imgSize"]'),prolist:e.map(function(t){return{bcid:t.bcid}})};t.moduleEntity.update({data:r},function(){t.proWrapDialog.close().remove()})},getShowType:function(t){var e=this.banProductWrap.find(t+" .radioCon"),o="";return e.each(function(t,e){$(this).hasClass("curRadioBox")&&(o=t+1)}),o},getPageSize:function(t){var e=this.banProductWrap.find(t+" .radioCon"),o="";return e.each(function(t,e){if($(this).hasClass("curRadioBox"))switch(t){case 0:o=3;break;case 1:o=2;break;case 2:o=1}}),o},createProductDialog:function(){var t=this,e=t.getShellData({pageindex:1,pagesize:t.pageNumber,providerid:pageEntity.providerid});e.done(function(e){t.proListDialog=dialog({title:"\u901a\u680f\u4ea7\u54c1>\u63d2\u5165\u4ea7\u54c1",content:t.moduleHtml.selectProduct}),t.proListWrap=$(t.proListDialog.node),t.proListDate=t.moduleData.prolist.slice(0,t.proLimit),t.proLen=t.proListDate.length,t.getShellHtml(e,"initShop"),t.getSelectHtml(),t.onSellList=t.proListWrap.find(".seleListCon dl"),t.selectList=t.proListWrap.find(".seleRightCon ul"),t.noBusiness=t.proListWrap.find('[node-name="noBusiness"]'),t.proListWrap.on("click",".Cancel",function(){t.proListDialog.close().remove()}),t.proListWrap.find('[data-node-name="Please"]').attr("href","http://my.b2b.hc360.com/my/turbine/template/corcenter%2Cbusiness%2Cbusinonsale.html"),t.chooseProduct(),t.undoSelectProduct(),t.searchProduct(),t.saveSelectProduct(),a.preventMousewheel(t.proListWrap.find('[data-node-name="proListWrap"] .seleListCon')),a.preventMousewheel(t.proListWrap.find(".seleRight .seleRightCon"))}).fail(function(){a.createDialog("\u62c9\u53d6\u5728\u552e\u5546\u54c1\u63a5\u53e3\u5931\u8d25\uff01")})},getShellHtml:function(t,e){var o=this,i=t.data,n=i.prolist,r=o.proListWrap.find('.seleList>div[data-node-name="proListWrap"]'),l=o.proListWrap.find(".seleList .pageList");if(0==t.state)return o.proListLoding&&o.proListLoding.close().remove(),a.createDialog(t.message),!1;if(r.hide(),0==n.length)return o.proListLoding&&o.proListLoding.close().remove(),"initShop"==e?r.eq("0").show():r.eq("1").show(),l.length>0?l.remove():"",o.proListDialog.showModal(),!1;if(r.eq("2").show(),o.proListLoding&&o.proListLoding.close().remove(),$.each(n,function(t,e){var a=e.bcid;$.each(o.proListDate,function(t,o){if(o.bcid==a)return void(e.isChoose=!0)})}),o.moduleHtml.onlineProModule){var d=mustache.render(o.moduleHtml.onlineProModule,{proList:n});o.proListWrap.find(".seleListCon dl").html(d),a.initImgSrc(o.proListWrap.find(".seleListCon dl dd"))}o.proListDialog.open||o.proListDialog.showModal(),"initShop"!=e&&"searchShop"!=e||o.createPagination(0,i.procount)},getShellData:function(t){return $.ajax({url:"/detail/turbine/action/GetSelectProductListAction/eventsubmit_doBusinchance/doBusinchance",type:"get",data:t,jsonp:"callback",dataType:"jsonp"})},getSelectHtml:function(){var t=this,e={proList:t.proListDate,len:t.proLen,isShow:function(){return 0!=this.len}};if(t.moduleHtml.selectProWrap){var o=mustache.render(t.moduleHtml.selectProWrap,e);t.proListWrap.find(".seleRight").html(o),a.initImgSrc(t.proListWrap.find(".seleRight li"))}},createPagination:function(t,e){var o=this,a=o.proListWrap.find(".seleList .pageList");0==a.length&&(a=$("<div class='pageList'></div>").appendTo(o.proListWrap.find(".seleList"))),a.pagination(e,{num_edge_entries:0,num_display_entries:5,current_page:t,items_per_page:o.pageNumber,prev_text:"&nbsp;",next_text:"&nbsp;",link_to:"#p__id__",ellipse_text:"...",load_first_page:!1,callback:function(t){var e={pageindex:++t,providerid:pageEntity.providerid,pagesize:o.pageNumber},a=o.proListWrap.find(".seleProSea input").val();a.length>0&&(e.productname=encodeURIComponent(a)),o.getShellData(e).done(function(t){o.getShellHtml(t,"nextPage")})}})},chooseProduct:function(){var t=this;t.proListWrap.on("click",'[node-name="selectBtn"]',function(){if(t.noBusiness.is(":visible")?t.noBusiness.hide():"",t.proLen==t.proLimit)return a.createDialog("\u60a8\u9009\u62e9\u7684\u4ea7\u54c1\u5df2\u8fbe\u4e0a\u9650!"),!1;if(!$(this).hasClass("gBtn2")){$(this).addClass("gBtn2").html("\u5df2\u9009\u62e9");var e=$(this).parents("dd"),o={linkurl:e.find(".picbox a").attr("href"),picurl:e.find(".picbox img").attr("src"),bcname:e.find(".picboxTit a").html(),bcid:e.attr("data-bcid")};if(t.proListDate.unshift(o),t.moduleHtml.productHtml){var i=mustache.render(t.moduleHtml.productHtml,o);t.selectList.prepend(i)}t.proLen++,t.proListWrap.find(".proLen").html(t.proLen)}})},undoSelectProduct:function(){var t=this;t.proListWrap.on("click",'[node-name="closePro"]',function(){var e=$(this).parent("li").attr("data-bcid");$.each(t.proListDate,function(o,a){if(a.bcid==e)return t.proListDate.splice(o+1,1),!1}),$(this).parents("li").remove(),t.onSellList.find("dd").each(function(){$(this).attr("data-bcid")==e&&$(this).find(".picboxBtn button").html("\u9009\u62e9").removeClass("gBtn2")}),t.proLen--,t.proListWrap.find(".proLen").html(t.proLen),0==t.proLen&&t.noBusiness.show()})},searchProduct:function(){var t=this;t.proListWrap.on("click",'[node-name="searchPro"]',function(){var e=$(this).parent(".seleProSea").find("input").val(),o={productname:0==e.length?"":encodeURIComponent(e),providerid:pageEntity.providerid,pageindex:1,pagesize:t.pageNumber};t.getShellData(o).done(function(e){t.getShellHtml(e,"searchShop")})})},saveSelectProduct:function(){var t=this,e=[];t.proListWrap.on("click",".Save",function(){t.selectList.find("li").each(function(){var t={bcid:$(this).attr("data-bcid"),bcname:$(this).find(".picboxTit a").html(),picurl:$(this).find(".picbox img").attr("src"),linkurl:$(this).find(".picbox a").attr("href")};e.push(t)}),t.moduleData.prolist=e,t.banProductWrap.find(".proLen").html(e.length),t.proListDialog.close().remove()})},loadComponents:function(){var t=$.Deferred(),e=$.Deferred();return o.e(3,function(e){o(54),t.resolve()}),o.e(4,function(t){o(56),e.resolve()}),[t,e]}},t.exports=n},68:function(t,e,o){function a(t,e,o){var a=this;a.html=e,a.moduleEntity=t,a.formData=$.extend(!0,{},t.dataEntity.data),a.options=$.extend({webuploader:{server:"//imgup.b2b.hc360.com/imgup/turbine/action/imgup.PicManagementAction/eventsubmit_doPerform/ddd",formData:{operType:"upload",picstr:$("#picstr").val()||"",widthHeightLimitFlag:1,widthMinLimit:"0",widthMaxLimit:"1920",heightMinLimit:"0",heightMaxLimit:"800"},fileVal:"file",pick:{multiple:!1},accept:{title:"Images",extensions:"gif,jpg,jpeg",mimeTypes:"image/gif,image/jpg,image/jpeg"},threads:1,compress:!1,swf:"//style.org.hc360.cn/js/module/shop3.0/dist/components/webuploader/webuploader.swf?t="+Math.random(),disableGlobalDnd:!0,fileSizeLimit:5242880,duplicate:!0,auto:!1}},o||{});var i=a.getComponentDeferred();$.when.apply(null,i).done(function(){a.init()})}var i=o(53),n=o(65);a.prototype.init=function(){var t=this,e=t.formData.picurl||"";e=n.getBgUrl(n.serializeStyle(e)["background-image"]||""),t.formData.picurl=e,t.dialogEntity=dialog({content:t.html,title:"\u7f16\u8f91\u5185\u5bb9>\u5bbd\u5c4f\u6269\u5c55\u5e7f\u544a"}).showModal(),t.options.rendedCallback&&t.options.rendedCallback.call(t),$(t.dialogEntity.node).find("[data-element-name]").each(function(e,o){var a=$.trim($(o).attr("data-element-name"));a&&!t[a]&&(t[a]=$('[data-element-name="'+a+'"]'))}),t.wrapUnselected.show(),t.wrapSelected.hide(),t.imgAD.removeAttr("src"),e&&(t.wrapUnselected.hide(),t.wrapSelected.show(),t.imgAD.attr("src",e),t.btnPreview.attr({href:e,target:"_blank"})),t.txtLink.val(""),$.trim(t.formData.linkurl)&&t.txtLink.val(t.formData.linkurl),t.wrapUpload.hide(),t.bindEvent()},a.prototype.bindEvent=function(){var t=this;if(t.btnShowSelectArea.click(function(e){t.wrapUnselected.hide(),t.imgTitle.html("\u672a\u9009\u62e9\u4efb\u4f55\u6587\u4ef6"),t.wrapUpload.show()}),t.btnHideSelectArea.click(function(e){t.wrapUnselected.show(),t.wrapUpload.hide()}),t.btnSave.click(function(e){if(t.formData.linkurl=t.txtLink.val(),!t.validate())return!1;var o=t.getMaxHeightDeferred(t.formData.picurl);o.done(function(e){var o={operatetype:2,operatedata:{providerid:pageEntity.providerid,username:pageEntity.username,data:{picurl:"background-image:url("+t.formData.picurl+");height:"+e+"px;",linkurl:t.formData.linkurl}}};arguments.callee;o.operatedata=$.extend({},t.moduleEntity.dataEntity,o.operatedata),t.moduleEntity.update({data:o.operatedata.data},function(){t.dialogEntity.remove()})})}),t.btnCancel.click(function(e){t.dialogEntity.remove(),t.webuploaderEntity&&t.webuploaderEntity.destroy()}),t.btnUpload.click(function(e){return 0===t.webuploaderEntity.getFiles().length?void dialog({title:"\u63d0\u793a",content:"\u672a\u9009\u62e9\u4efb\u4f55\u6587\u4ef6",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal():void(t.webuploaderEntity&&t.webuploaderEntity.upload())}),t.detectBrowserSupport()){var e=$.extend(t.options.webuploader,{pick:{id:t.btnSelect.selector}});t.webuploaderEntity=webuploader.create(e),t.webuploaderEntity.on("fileQueued",function(e){t.imgTitle.html(e.name)}),t.webuploaderEntity.on("uploadAccept",function(e,o){var a=o||{},i=!1;return"true"===a.state?(t.formData.picurl=a.result.url,t.imgAD.attr("src",a.result.url),t.btnPreview.attr({href:t.formData.picurl,target:"_blank"}),t.imgAD.parent().imgLiquid({fill:!1}),t.wrapSelected.show(),t.wrapUpload.hide()):t.webuploaderEntity.trigger("error","CUSTOM",a.error.message),i}),t.webuploaderEntity.on("error",function(){var t={Q_EXCEED_NUM_LIMIT:"\u4e0a\u4f20\u6587\u4ef6\u6570\u91cf\u8d85\u8fc7\u4e0a\u9650\uff01",Q_EXCEED_SIZE_LIMIT:"\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u4e0a\u9650\uff01",Q_TYPE_DENIED:"\u4e0a\u4f20\u6587\u4ef6\u7c7b\u578b\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u4e0a\u4f20\uff01",F_DUPLICATE:"\u4e0a\u4f20\u6587\u4ef6\u91cd\u590d\u4e86\u8bf7\u91cd\u65b0\u9009\u62e9\u4e0a\u4f20\uff01",OTHER:"\u4e0a\u4f20\u5931\u8d25\u8bf7\u91cd\u65b0\u4e0a\u4f20\uff01",CUSTOM:""},e=arguments[0]||"OTHER";dialog({title:"\u63d0\u793a",content:t[e]||arguments[1]||"",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal()})}},a.prototype.validate=function(){var t=this;if(!$.trim(t.formData.picurl))return dialog({title:"\u63d0\u793a",content:"\u8bf7\u4e0a\u4f20\u56fe\u7247\uff01",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal(),!1;if($.trim(t.formData.linkurl)){var e=i.parseURL(t.formData.linkurl);if(!/hc360.com$/.test(e.host.toLowerCase()))return dialog({title:"\u63d0\u793a",content:"\u4e0d\u80fd\u94fe\u63a5\u6167\u806a\u7f51\u4ee5\u5916\u5730\u5740\uff01",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal(),t.txtLink.val(""),!1;t.txtLink.val(e.source),t.formData.linkurl=e.source}return!0},a.prototype.getComponentDeferred=function(){var t=$.Deferred();o.e(5,function(e){o(57),t.resolve()});var e=$.Deferred();return o.e(1,function(t){o(44),e.resolve()}),[t,e]},a.prototype.detectBrowserSupport=function(){var t=this,e=function(){var t;try{t=navigator.plugins["Shockwave Flash"],t=t.description}catch(e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(o){t="0.0"}}return t=t.match(/\d+/g),parseFloat(t[0]+"."+t[1],10)}();return!webuploader.Uploader.support("flash")&&webuploader.browser.ie?(e?!function(t){window.expressinstallcallback=function(t){switch(t){case"Download.Cancelled":alert("\u60a8\u53d6\u6d88\u4e86\u66f4\u65b0\uff01");break;case"Download.Failed":alert("\u5b89\u88c5\u5931\u8d25");break;default:alert("\u5b89\u88c5\u5df2\u6210\u529f\uff0c\u8bf7\u5237\u65b0\uff01")}delete window.expressinstallcallback};var e="//style.org.hc360.cn/js/build/source/widgets/jqwebuploader/expressInstall.swf",o='<object type="application/x-shockwave-flash" data="'+e+'" ';webuploader.browser.ie&&(o+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),o+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+e+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',t.html(o)}(t.btnSelect):t.btnSelect.replaceWith($('<a href="//www.adobe.com/go/getflashplayer" target="_blank" border="0"><img alt="get flash player" src="//style.org.hc360.cn/js/build/source/widgets/jqwebuploader/getFlashPlayer.jpg" /></a>')),!1):!!webuploader.Uploader.support()||(dialog({title:"\u63d0\u793a",content:"\u56fe\u7247\u4e0a\u4f20\u7ec4\u4ef6\u4e0d\u652f\u6301\u60a8\u7684\u6d4f\u89c8\u5668\uff01",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal(),!1)},a.prototype.getMaxHeightDeferred=function(t){var e=$.Deferred(),o=t;if(""==o||!o)return!0;var a=new Image;return a.onload=function(){e.resolve(this.height)},a.onerror=function(){e.resolve(0)},a.src=o,e},t.exports=a},69:function(t,e){function o(t,e,o){var a=this;a.moduleEntity=t,a.dialogEntity=dialog({content:e,title:"\u7f16\u8f91\u5185\u5bb9>\u4fe1\u8a89\u8bc1\u4e66"}).showModal(),a.options=$.extend({},o||{}),a.options.rendedCallback&&a.options.rendedCallback.call(a),a.btnCancel=$(a.dialogEntity.node).find(".t-close,.Cancel"),a.btnSave=$(a.dialogEntity.node).find(".Save"),a.chkShowTitleAndBorder=$(a.dialogEntity.node).find("#titleAndBorder"),a.txtTitle=$(a.dialogEntity.node).find("input[name='title']"),a.displayOptions=$(".radioBox span.radioCon"),a.btnPreview=$(a.dialogEntity.node).find("#btnPreview"),a.initData(),a.bindEvent()}o.prototype.initData=function(){var t=this;t.txtTitle.val(t.moduleEntity.dataEntity.data.title);var e=parseInt(t.moduleEntity.dataEntity.data.showTitleAndBorder)||0;e?t.chkShowTitleAndBorder.addClass("curChosen"):t.chkShowTitleAndBorder.removeClass("curChosen"),t.displayOptions.filter('[data-val="'+t.moduleEntity.dataEntity.data.type+'"]').addClass("curRadioBox").siblings().removeClass("curRadioBox")},o.prototype.bindEvent=function(){var t=this;t.btnCancel.on("click",function(){t.dialogEntity.remove()}),t.chkShowTitleAndBorder.on("click",function(){$(this).toggleClass("curChosen")}),t.displayOptions.click(function(t){$(this).addClass("curRadioBox").siblings().removeClass("curRadioBox")}),t.btnSave.click(function(e){var o=$.trim(t.txtTitle.val()),a=t.chkShowTitleAndBorder.hasClass("curChosen")?1:0,i=t.displayOptions.filter("span.curRadioBox").length?t.displayOptions.filter("span.curRadioBox").attr("data-val"):0,n={title:o,showTitleAndBorder:a,type:i};if(0===o.length||o.length>5){var r=0===o.length?"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01":"\u6807\u9898\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e5\u4e2a\u5b57\u7b26\uff01";return dialog({title:"\u63d0\u793a",content:r,okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal(),!1}t.moduleEntity.update({data:n},function(){t.dialogEntity.remove()})}),t.btnPreview.click(function(e){var o=$(this),a=$.trim(t.txtTitle.val()),i=t.chkShowTitleAndBorder.hasClass("curChosen")?1:0,n=t.displayOptions.filter("span.curRadioBox").length?t.displayOptions.filter("span.curRadioBox").attr("data-val"):0;if(0===a.length||a.length>5){var r=0===a.length?"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01":"\u6807\u9898\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e5\u4e2a\u5b57\u7b26\uff01";return dialog({title:"\u63d0\u793a",content:r,okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal(),!1}t.moduleEntity.dataEntity.data={title:a,showTitleAndBorder:i,type:n};var l="//style.org.hc360.cn/js/module/shop3.0/dist/backend/preview/module_certificate.html?params={{params}}",d={data:[],layout:window.pageEntity.layout||1,entity:$.extend(!0,{},t.moduleEntity.dataEntity,{data:{title:a,showTitleAndBorder:i,type:n}}),style:$("#lnkThemeStyle").attr("href")||""};t.moduleEntity.htmlEntity.find("li").each(function(t,e){var o=$(e);d.data.push({title:o.find("p").text()||"",pic:o.find("img").attr("src")||"",link:o.find("a:first").attr("href")})});try{o.attr("href",l.replace(/{{params}}/gi,encodeURIComponent(JSON.stringify(d))))}catch(s){}})},t.exports=o},70:function(t,e){function o(t,e,o){var a=this;a.moduleEntity=t,a.dialogEntity=dialog({content:e,title:"\u7f16\u8f91\u5185\u5bb9>\u516c\u53f8\u76f8\u518c"}).showModal(),a.options=$.extend({},o||{}),a.options.rendedCallback&&a.options.rendedCallback.call(a),a.btnCancel=$(a.dialogEntity.node).find(".t-close,.Cancel"),a.btnSave=$(a.dialogEntity.node).find(".Save"),a.chkShowTitleAndBorder=$(a.dialogEntity.node).find("#titleAndBorder"),a.txtTitle=$(a.dialogEntity.node).find("input[name='title']"),a.initData(),a.bindEvent()}o.prototype.initData=function(){var t=this;t.txtTitle.val(t.moduleEntity.dataEntity.data.title);var e=parseInt(t.moduleEntity.dataEntity.data.showTitleAndBorder)||0;e?t.chkShowTitleAndBorder.addClass("curChosen"):t.chkShowTitleAndBorder.removeClass("curChosen")},o.prototype.bindEvent=function(){var t=this;t.btnCancel.on("click",function(){t.dialogEntity.remove()}),t.chkShowTitleAndBorder.on("click",function(){$(this).toggleClass("curChosen")}),t.btnSave.click(function(e){var o=$.trim(t.txtTitle.val()),a=t.chkShowTitleAndBorder.hasClass("curChosen")?1:0,i={operatetype:2,operatedata:{providerid:pageEntity.providerid,username:pageEntity.username,data:{title:o,showTitleAndBorder:a}}};arguments.callee;return i.operatedata=$.extend({},t.moduleEntity.dataEntity,i.operatedata),0===o.length?(dialog({title:"\u63d0\u793a",content:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal(),!1):void t.moduleEntity.update({data:i.operatedata.data},function(){t.dialogEntity.close().remove()})})},t.exports=o},71:function(t,e){var o=function(t,e,o){var a=this;a.module=t,a.moduleBox=t.htmlEntity,a.moduleData=t.dataEntity,a.editDialog=dialog({content:e,title:"\u7f16\u8f91\u5185\u5bb9>\u516c\u53f8\u52a8\u6001"}).showModal(),a.options=o||{},a.options.rendedCallback&&a.options.rendedCallback.call(a),a.closeAndCancelDialogBtn=$(a.editDialog.node).find(".t-close,.Cancel"),a.saveDialogBtn=$(a.editDialog.node).find(".Save"),a.showTitleAndBorderRadio=$(a.editDialog.node).find("#titleAndBorder"),a.titleInput=$(a.editDialog.node).find("input[name='title']"),a.initModuleData(),a.operateModuleData()};o.prototype={initModuleData:function(){var t=this;t.titleInput.val(t.moduleData.data.title);var e=parseInt(t.moduleData.data.showTitleAndBorder)||0;e?t.showTitleAndBorderRadio.addClass("curChosen"):t.showTitleAndBorderRadio.removeClass("curChosen")},operateModuleData:function(){var t=this;t.closeAndCancelDialogBtn.on("click",function(){t.editDialog.close().remove()}),t.showTitleAndBorderRadio.on("click",function(){$(this).toggleClass("curChosen")}),t.saveDialogBtn.on("click",function(){var e=$.trim(t.titleInput.val()),o=t.showTitleAndBorderRadio.hasClass("curChosen")?1:0;if(0===e.length)return dialog({title:"\u63d0\u793a",content:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01",okValue:"\u786e\u5b9a",ok:function(){this.close().remove()}}).showModal(),!1;var a={operatetype:2,operatedata:{providerid:pageEntity.providerid,username:pageEntity.username,data:{title:e,showTitleAndBorder:o}}};a.operatedata=$.extend(t.moduleData,a.operatedata),t.module.update({data:a.data},function(){t.editDialog.close().remove()})})}},t.exports=o},72:function(t,e){var o=function(t,e,o){var a=this;a.module=t,a.moduleBox=t.htmlEntity,a.moduleData=t.dataEntity,a.editDialog=dialog({content:e,title:"\u7f16\u8f91\u5185\u5bb9>\u516c\u53f8\u4ecb\u7ecd"}).showModal(),a.options=o||{},a.options.rendedCallback&&a.options.rendedCallback.call(a),a.closeAndCancelDialogBtn=$(a.editDialog.node).find(".t-close,.Cancel"),a.saveDialogBtn=$(a.editDialog.node).find(".Save"),a.showTitleAndBorderRadio=$(a.editDialog.node).find("#titleAndBorder"),a.titleInput=$(a.editDialog.node).find("input[name='title']"),a.initModuleData(),a.operateModuleData()};o.prototype={initModuleData:function(){var t=this;t.titleInput.val(t.moduleData.data.title);var e=parseInt(t.moduleData.data.showTitleAndBorder)||0;e?t.showTitleAndBorderRadio.addClass("curChosen"):t.showTitleAndBorderRadio.removeClass("curChosen")},operateModuleData:function(){var t=this;t.closeAndCancelDialogBtn.on("click",function(){t.editDialog.close().remove()}),t.showTitleAndBorderRadio.on("click",function(){$(this).toggleClass("curChosen")}),t.saveDialogBtn.on("click",function(){var e=$.trim(t.titleInput.val()),o=t.showTitleAndBorderRadio.hasClass("curChosen")?1:0;if(0===e.length)return dialog({title:"\u63d0\u793a",content:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01",okValue:"\u786e\u5b9a",ok:function(){this.close().remove()}}).showModal(),!1;var a={operatetype:2,operatedata:{providerid:pageEntity.providerid,username:pageEntity.username,data:{title:e,showTitleAndBorder:o}}};a.operatedata=$.extend(t.moduleData,a.operatedata),t.module.update({data:a.data},function(){t.editDialog.close().remove()})})}},t.exports=o},73:function(t,e){var o=function(t,e,o){var a=this;a.module=t,a.moduleBox=t.htmlEntity,a.moduleData=t.dataEntity,a.editDialog=dialog({content:e,title:"\u7f16\u8f91\u5185\u5bb9>\u8054\u7cfb\u6211\u4eec"}).showModal(),a.options=o||{},a.options.rendedCallback&&a.options.rendedCallback.call(a),a.closeAndCancelDialogBtn=$(a.editDialog.node).find(".t-close,.Cancel"),a.saveDialogBtn=$(a.editDialog.node).find(".Save"),a.showTitleAndBorderRadio=$(a.editDialog.node).find("#titleAndBorder"),a.titleInput=$(a.editDialog.node).find("input[name='title']"),a.initModuleData(),a.operateModuleData()};o.prototype={initModuleData:function(){var t=this;t.titleInput.val(t.moduleData.data.title);var e=parseInt(t.moduleData.data.showTitleAndBorder)||0;e?t.showTitleAndBorderRadio.addClass("curChosen"):t.showTitleAndBorderRadio.removeClass("curChosen")},operateModuleData:function(){var t=this;t.closeAndCancelDialogBtn.on("click",function(){t.editDialog.close().remove()}),t.showTitleAndBorderRadio.on("click",function(){$(this).toggleClass("curChosen")}),t.saveDialogBtn.on("click",function(){var e=$.trim(t.titleInput.val()),o=t.showTitleAndBorderRadio.hasClass("curChosen")?1:0;if(0===e.length)return dialog({title:"\u63d0\u793a",content:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01",okValue:"\u786e\u5b9a",ok:function(){this.close().remove()}}).showModal(),!1;var a={
operatetype:2,operatedata:{providerid:pageEntity.providerid,username:pageEntity.username,data:{title:e,showTitleAndBorder:o}}};a.operatedata=$.extend(t.moduleData,a.operatedata),t.module.update({data:a.data},function(){t.editDialog.close().remove()})})}},t.exports=o},74:function(t,e,o){var a=o(65),i=function(t,e,o){this.moduleEntity=t,this.moduleData=t.dataEntity.data,this.option=o||{},this._fontColor=a.formatDate(this.moduleData.font).color,this._background=a.formatDate(this.moduleData.background).background,this.initLayer(e)};i.prototype={initLayer:function(t){var e=this,a={fontColor:this._fontColor,_background:this._background,bgType:function(){return!!this._background}};o.e(3,function(i){o(54),e.option.rendedCallback&&e.option.rendedCallback.call(e),e.searchDialog=dialog({content:mustache.render(t,a),title:"\u7f16\u8f91\u5185\u5bb9>\u641c\u7d22\u680f"}).showModal(),e.bindEvent()})},bindEvent:function(){var t=this;t.searchWrap=$(t.searchDialog.node),t.searchTab=t.searchWrap.find('[data-node-name="searchTab"]'),t.crumbsWrap=t.searchWrap.find('[data-node-name="customBgColorDiv"]'),t._fontColorWrap=t.searchWrap.find('[data-node-name="fontColor"]'),t.bgColorWrap=t.searchWrap.find('[data-node-name="bjColor"]'),t.searchTab.on("click","span",function(){$(this).addClass("curRadioBox").siblings().removeClass("curRadioBox"),1==$(this).index()?t.crumbsWrap.show():t.crumbsWrap.hide()}),a.createColorpicker(t._fontColorWrap,t._fontColor,t.searchDialog),a.createColorpicker(t.bgColorWrap,t._background,t.searchDialog),t.searchWrap.on("click",".t-close,.Cancel",function(){t.searchDialog.close().remove()}),t.searchWrap.on("click",".Save",function(){t.saveSearch()})},saveSearch:function(){var t=this,e=t._fontColorWrap.attr("data-color"),o=t.bgColorWrap.attr("data-color"),a=t.searchTab.find("span").eq(1),i={font:"",background:""};e&&(i.font="color:"+e+";"),a.hasClass("curRadioBox")&&o&&(i.background="background:"+o+";"),t.moduleEntity.update({data:i},function(){t.searchDialog.close().remove()})}},t.exports=i},75:function(t,e,o){function a(t,e,a){var i=this;i.moduleEntity=t,i.dialogEntity=dialog({content:e,title:"\u7f16\u8f91\u5185\u5bb9>\u81ea\u5b9a\u4e49\u5185\u5bb9"}).showModal(),i.options=$.extend({},a||{}),i.options.rendedCallback&&i.options.rendedCallback.call(i),i.dialogHtmlEntity=$(i.dialogEntity.node),i.btnCancel=i.dialogHtmlEntity.find(".t-close,.Cancel"),i.btnSave=i.dialogHtmlEntity.find(".Save"),i.chkShowTitleAndBorder=i.dialogHtmlEntity.find("#titleAndBorder"),i.txtTitle=i.dialogHtmlEntity.find("input[name='title']"),i.txtContent=i.dialogHtmlEntity.find('textarea[name="content"]'),o.e(9,function(t){o(76),i.initData(),i.bindEvent()})}var i=o(53);a.prototype.initData=function(){var t=this;t.getContentDeferred().always(function(){t.txtTitle.val(t.moduleEntity.dataEntity.data.title),Number(t.moduleEntity.dataEntity.data.showTitleAndBorder)?t.chkShowTitleAndBorder.addClass("curChosen"):t.chkShowTitleAndBorder.removeClass("curChosen"),t.editorEntity=KindEditor.create(t.txtContent,{resizeType:1,width:"100%",height:300,items:["source","|","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","removeformat","|","justifyleft","justifycenter","justifyright","insertorderedlist","insertunorderedlist","link","unlink"],cssPath:["//style.org.hc360.com/css/detail/mysite/siteconfig/newPro/mallBase.css"],afterChange:function(){},filterMode:!1}),t.editorEntity.html(t.moduleEntity.dataEntity.data.content),t.editorEntity.focus()})},a.prototype.getContentDeferred=function(){var t=this,e=$.ajax({url:"/detail/turbine/action/GetCustomContentAction/eventsubmit_doGetcustomcontent/doGetcustomcontent",type:"get",dataType:"jsonp",jsonp:"callback",data:{providerid:t.moduleEntity.regionEntity.pageEntity.providerid,area:t.moduleEntity.regionEntity.identifier,moduleid:t.moduleEntity.dataEntity.moduleid,windowtype:t.moduleEntity.dataEntity.windowtype,modulemark:t.txtContent.attr("data-flag")?t.moduleEntity.identifier:""}});return e.done(function(e){Number(e.state)&&(t.moduleEntity.dataEntity.data.content=e.data||"")}),e},a.prototype.bindEvent=function(){var t=this;t.btnCancel.on("click",function(){t.dialogEntity.remove()}),t.chkShowTitleAndBorder.on("click",function(){$(this).toggleClass("curChosen")}),t.btnSave.click(function(e){var o=$.trim(t.txtTitle.val()),a=t.chkShowTitleAndBorder.hasClass("curChosen")?1:0,n={title:t.txtTitle.length?o:"",showTitleAndBorder:t.chkShowTitleAndBorder.length?a:0,content:""};arguments.callee;if(t.txtTitle.length&&0===o.length)return dialog({title:"\u63d0\u793a",content:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal(),!1;if(t.txtTitle.length&&o.length>5)return dialog({title:"\u63d0\u793a",content:"\u6807\u9898\u6700\u591a\u8f93\u51655\u4e2a\u5b57\u7b26",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal(),!1;var r=$("<div>").html(t.editorEntity.html());r.find("a").each(function(t,e){var o=i.parseURL($(e).attr("href"));/hc360.com$/.test(o.host.toLowerCase())||(e.href="#")}),n.content=r.html(),t.moduleEntity.update({data:n},function(){t.dialogEntity.remove()})})},t.exports=a},77:function(t,e,o){t.exports=o(75)},78:function(t,e,o){function a(t,e,a){var i=this;i.moduleEntity=t,i.dialogEntity=dialog({content:e,title:"\u7f16\u8f91\u5185\u5bb9>\u81ea\u5b9a\u4e49\u9891\u9053"}).showModal(),i.options=$.extend({contentMaxLengthLimit:2e4},a||{}),i.options.rendedCallback&&i.options.rendedCallback.call(i),i.dialogHtmlEntity=$(i.dialogEntity.node),i.btnCancel=i.dialogHtmlEntity.find(".t-close,.Cancel"),i.btnSave=i.dialogHtmlEntity.find(".Save"),i.txtContent=i.dialogHtmlEntity.find('textarea[name="content"]'),i.contentWrap=i.moduleEntity.htmlEntity.find("#contents"),i.contentContainer=i.moduleEntity.htmlEntity.find('textarea[name="contents"]'),i.contentMaxLengthPrompt=i.dialogHtmlEntity.find(".textPrompt"),o.e(9,function(t){o(76),i.initData(),i.bindEvent()})}var i=o(53);a.prototype.initData=function(){var t=this;t.moduleEntity.dataEntity.content=t.contentWrap.html(),t.contentMaxLengthPrompt.show(),t.editorEntity=KindEditor.create(t.txtContent,{resizeType:1,width:"100%",height:300,items:["fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","removeformat","|","justifyleft","justifycenter","justifyright","insertorderedlist","insertunorderedlist","link"],afterChange:function(){t.contentMaxLengthPrompt.find("em").text(t.options.contentMaxLengthLimit-this.count("html")).show()}}),t.editorEntity.html(t.contentContainer.val()),t.editorEntity.focus()},a.prototype.getContentUpdateDeferred=function(t){return $.ajax({url:"/detail/turbine/action/SaveCustomContentAction/eventsubmit_doSave/doSave",type:"post",dataType:"text",data:t||{}})},a.prototype.bindEvent=function(){var t=this;t.btnCancel.on("click",function(){t.dialogEntity.remove()}),t.btnSave.click(function(e){var o=t.options.contentMaxLengthLimit,a={customizeType:t.moduleEntity.dataEntity.type,providerid:window.providerId,customizeContent:""};arguments.callee;if(t.editorEntity.count("html")>o)return dialog({title:"\u63d0\u793a",content:"\u5185\u5bb9\u6700\u591a\u8f93\u5165"+o+"\u4e2a\u5b57\u7b26",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal(),!1;var n=$("<div>").html(t.editorEntity.html());n.find("a").each(function(t,e){var o=i.parseURL(e.href);/hc360.com$/.test(o.host.toLowerCase())||(e.href="#")}),a.customizeContent=encodeURIComponent(n.html());var r=dialog({content:'<span class="ui-dialog-loading">\u52a0\u8f7d\u4e2d..</span>'}).showModal();$.when(t.getContentUpdateDeferred(a)).done(function(e){t.contentWrap.html(e),t.contentContainer.val(e),t.dialogEntity.remove()}).always(function(){r.remove()})})},t.exports=a},79:function(t,e,o){var a=o(53),i=function(t,e,o){var i=this;i.module=t,i.moduleBox=t.htmlEntity,i.moduleData=t.dataEntity,i.moduleData.data.prolist.slice(0,8),i.tempHtml=a.getTemplateFromHTML(e),i.selectCount=i.moduleData.data.prolist.length,i.totalCount=8,i.pageData={pageindex:1,pagesize:40,providerid:pageEntity.providerid},i.options=o||{},$.when.apply(null,i.loadComponents()).done(function(){i.initLayer()})};i.prototype={initLayer:function(){var t=this,e={title:t.moduleData.data.title,isChosen:function(){var e=parseInt(t.moduleData.data.showTitleAndBorder)||0;return e?1:0},selectCount:t.selectCount,totalCount:t.totalCount};t.editDialog=dialog({content:mustache.render([t.tempHtml.editDialog,t.tempHtml.proDialog].join(""),e),title:"\u7f16\u8f91\u5185\u5bb9>\u6269\u5c55\u6a71\u7a97"}).showModal(),t.options.rendedCallback&&t.options.rendedCallback.call(t),t.bindEvent()},bindEvent:function(){var t=this;t.dialogWrap=$(t.editDialog.node),t.editDialogWrap=t.dialogWrap.find("[node-name='editDialog']"),t.proDialogWrap=t.dialogWrap.find("[node-name='proDialog']"),t.selectProBtn=t.editDialogWrap.find("#selectProBtn"),t.saveBtn=t.dialogWrap.find(".Save"),t.titleInput=t.dialogWrap.find("input[name='title']"),t.showTitleAndBorderRadio=t.dialogWrap.find("#titleAndBorder_extWin"),t.editDialogWrap.on("click",".t-close,.Cancel",function(){t.editDialog.close().remove()}),t.showTitleAndBorderRadio.on("click",function(){$(this).toggleClass("curChosen")}),t.selectProBtn.on("click",function(){t.createProDialog(t.pageData)}),t.saveEditDialog()},createProDialog:function(t){var e=this;$.when(e.getOnSaleData(t),e.getOnSelectData()).done(function(t){e.createOnSaleHtml(t[0],e.proDialogWrap),e.proDialog=dialog({title:"\u6269\u5c55\u6a71\u7a97>\u63d2\u5165\u4ea7\u54c1",content:e.proDialogWrap.html()}).showModal(),e.options.rendedCallback&&e.options.rendedCallback.call(e),$(e.proDialog.node).find(".t-close,.Cancel").on("click",function(){e.proDialog.close().remove()}),e.initPagnation(t[0].data.procount),e.selectSaleProFunc(),e.cancelSeleProFunc(),e.filterSaleProFunc(),e.saveSaleProFunc()}).fail(function(){e.createDialog("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01")})},getOnSaleData:function(t){return $.ajax({type:"GET",dataType:"jsonp",jsonp:"callback",url:"/detail/turbine/action/GetSelectProductListAction/eventsubmit_doBusinchance/doBusinchance",data:t})},getOnSelectData:function(){var t=this,e=$.Deferred();t.selectCount=t.updateModuleData?t.updateModuleData.prolist.length:t.moduleData.data.prolist.length,0===t.selectCount?(t.proDialogWrap.find(".seleRight dd").html("\u60a8\u53ef\u4ee5\u9009\u62e9<span>"+t.totalCount+"\u6761</span>\u4ea7\u54c1\u663e\u793a\u5728\u6269\u5c55\u6a71\u7a97"),t.proDialogWrap.find("#noProListTip").show(),t.proDialogWrap.find("#ProListDiv").hide()):(t.proDialogWrap.find(".seleRight dd").html("\u60a8\u53ef\u4ee5\u9009\u62e9<b id='total_count'>"+t.totalCount+"\u6761</b>\uff0c\u5df2\u9009\u62e9<span  id='select_count'>"+t.selectCount+"\u6761</span>"),t.proDialogWrap.find("#noProListTip").hide(),t.proDialogWrap.find("#ProListDiv").show());var o=t.updateModuleData?t.updateModuleData:t.moduleData.data,a=mustache.render(t.tempHtml.isSelectPro,o);return t.proDialogWrap.find("#ProListDiv ul").html(a),e.resolve(),e},createOnSaleHtml:function(t,e,o,a){var i=this;if(1==t.state)if(t.data.prolist&&t.data.prolist.length>0){$.each(t.data.prolist,function(t,e){var a="";a=o&&"object"==typeof o&&o.prolist.length>=0?o:i.updateModuleData?i.updateModuleData:i.moduleData.data,$.each(a.prolist,function(t,o){if(e.bcid==o.bcid)return e.isSelect=!0,!1})});var n=mustache.render(i.tempHtml.selectPro,t.data);e.find(".seleListCon dl").length>0?e.find(".seleListCon dl").html(n):e.find(".seleList").html('<dl><dt><span class="seleTit1">\u4ea7\u54c1\u4fe1\u606f</span><span class="seleTit2">\u64cd\u4f5c</span></dt></dl><div class="seleListCon"><dl>'+n+"</dl></div>")}else a&&"search"==a?e.find(".seleList").html('<p class="sLeftPrompt">\u672a\u641c\u7d22\u5230\u76f8\u5173\u5546\u54c1</p>'):e.find(".seleList").html('<p class="sLeftPrompt">\u5546\u94fa\u4e2d\u6682\u65e0\u5728\u552e\u5546\u54c1\uff0c<a href="http://my.b2b.hc360.com/my/turbine/template/corcenter%2Cbusiness%2Cstepsupplyfirst.html" target="_blank">\u8bf7\u8865\u5145</a></p>');else i.createDialog(t.message)},initPagnation:function(t){var e=this;if(t<e.pageData.pagesize||t==e.pageData.pagesize)return $(e.proDialog.node).find(".pageList").length>0&&$(e.proDialog.node).find(".pageList").remove(),!1;var o=$(e.proDialog.node).find(".pageList").length>0?$(e.proDialog.node).find(".pageList"):$("<div>",{"class":"pageList"}).appendTo($(e.proDialog.node).find(".seleList"));o.pagination(t,{num_display_entries:5,link_to:"#p__id__",items_per_page:e.pageData.pagesize,prev_text:"&nbsp;",next_text:"&nbsp;",load_first_page:!1,callback:function(t){var o={pageindex:t+1,productname:encodeURIComponent($.trim($(e.proDialog.node).find("#filterText").val()))||""},a=$.extend({},e.pageData,o),i={prolist:[]};$(e.proDialog.node).find("#ProListDiv").is(":visible")&&(i.prolist=$.map($(e.proDialog.node).find("#ProListDiv li"),function(t){return{bcid:$(t).find("em").attr("data-bcid")}})),$.when(e.getOnSaleData(a)).done(function(t){e.createOnSaleHtml(t,$(e.proDialog.node),i),$(e.proDialog.node).find(".seleListCon").scrollTop(0)})}})},selectSaleProFunc:function(){var t=this;$(t.proDialog.node).on("click",'button[type="submit"][data-bcid]',function(){var e=$(this);if(t.selectCount==t.totalCount)return t.createDialog("\u60a8\u9009\u62e9\u7684\u4ea7\u54c1\u6570\u5df2\u8fbe\u4e0a\u9650"),!1;if(!e.hasClass("gBtn2")){var o=e.parent().siblings(".picboxTit").text(),a=e.parent().siblings(".picbox").find("img").attr("src"),i=e.attr("data-bcid"),n={prolist:[{bcid:i,picurl:a,bcname:o}]};t.proDialogWrap.find("#ProListDiv").is(":hidden")&&($(t.proDialog.node).find(".seleRight dd").html("\u60a8\u53ef\u4ee5\u9009\u62e9<b id='total_count'>"+t.totalCount+"\u6761</b>\uff0c\u5df2\u9009\u62e9<span id='select_count'>1\u6761</span>"),$(t.proDialog.node).find("#noProListTip").hide(),$(t.proDialog.node).find("#ProListDiv").show());var r=mustache.render(t.tempHtml.isSelectPro,n);$(t.proDialog.node).find("#ProListDiv ul").append(r),$(this).addClass("gBtn2").text("\u5df2\u9009\u62e9"),t.selectCount++,$(t.proDialog.node).find("#select_count").text(t.selectCount+"\u6761")}})},cancelSeleProFunc:function(){var t=this;$(t.proDialog.node).find(".seleRight").on("click","em[data-bcid]",function(){var e=$(this),o=e.attr("data-bcid");return!!t.selectCount&&(t.selectCount--,t.selectCount>0?$(t.proDialog.node).find("#select_count").text(t.selectCount+"\u6761"):($(t.proDialog.node).find("#ProListDiv").hide(),$(t.proDialog.node).find(".seleRight dd").html("\u60a8\u53ef\u4ee5\u9009\u62e9<span>"+t.totalCount+"\u6761</span>\u4ea7\u54c1\u663e\u793a\u5728\u6269\u5c55\u6a71\u7a97"),$(t.proDialog.node).find("#noProListTip").show()),e.closest("li").remove(),void $("button[type='submit'][data-bcid="+o+"]").removeClass("gBtn2").text("\u9009\u62e9"))})},filterSaleProFunc:function(){var t=this;$(t.proDialog.node).find("button[data-name='searchBtn']").on("click",function(){var e=$.trim($(t.proDialog.node).find("#filterText").val()),o={productname:encodeURIComponent(e)},a=$.extend({},o,t.pageData);$.when(t.getOnSaleData(a)).done(function(e){var o={prolist:[]};$(t.proDialog.node).find("#ProListDiv").is(":visible")&&(o.prolist=$.map($(t.proDialog.node).find("#ProListDiv li"),function(t){return{bcid:$(t).find("em").attr("data-bcid")}})),t.createOnSaleHtml(e,$(t.proDialog.node),o,"search"),t.initPagnation(e.data.procount)})})},saveSaleProFunc:function(){var t=this;$(t.proDialog.node).find(".Save").on("click",function(){var e=[];$(t.proDialog.node).find("#ProListDiv").is(":visible")&&(e=$.map($(t.proDialog.node).find("#ProListDiv li"),function(t){return{bcid:$(t).find("em").attr("data-bcid"),bcname:$(t).find(".picboxTit").text(),picurl:$(t).find("img").attr("src"),linkurl:$(t).find("a").attr("href")}})),t.updateModuleData={title:t.moduleData.data.title,showTitleAndBorder:t.moduleData.data.showTitleAndBorder,prolist:e,isSelect:!0},t.proDialog.close().remove(),$(t.editDialog.node).find("#selectProBtn").next("span").text("\u5df2\u9009\u62e9"+t.selectCount+"/"+t.totalCount+"\u4e2a\u4ea7\u54c1")})},saveEditDialog:function(){var t=this;t.saveBtn.on("click",function(){var e=$.trim(t.titleInput.val()),o=t.showTitleAndBorderRadio.hasClass("curChosen")?1:0;if(0===e.length)return t.createDialog("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01"),!1;var a=$.map(t.moduleData.data.prolist,function(t){return{bcid:t.bcid}}),i=t.updateModuleData?t.updateModuleData.prolist:a;if(0===i.length)return void t.createDialog("\u60a8\u8fd8\u672a\u6dfb\u52a0\u4ea7\u54c1\uff01");var n={operatetype:2,operatedata:{providerid:pageEntity.providerid,username:pageEntity.username,data:{title:e,showTitleAndBorder:o,prolist:i}}};n.operatedata=$.extend(t.moduleData,n.operatedata),t.module.update({data:n.operatedata.data},function(){t.editDialog.close().remove()})})},createDialog:function(t){dialog({title:"\u63d0\u793a",content:t,okValue:"\u786e\u5b9a",ok:function(){return this.close().remove(),!1}}).showModal()},loadComponents:function(){var t=$.Deferred(),e=$.Deferred();return o.e(3,function(e){o(54),t.resolve()}),o.e(4,function(t){o(56),e.resolve()}),[t,e]}},t.exports=i},80:function(t,e){var o=function(t,e,o){var a=this;a.module=t,a.moduleBox=t.htmlEntity,a.moduleData=t.dataEntity,a.editDialog=dialog({content:e,title:"\u7f16\u8f91\u5185\u5bb9>\u5ba2\u6237\u7559\u8a00"}).showModal(),a.options=o||{},a.options.rendedCallback&&a.options.rendedCallback.call(a),a.closeAndCancelDialogBtn=$(a.editDialog.node).find(".t-close,.Cancel"),a.saveDialogBtn=$(a.editDialog.node).find(".Save"),a.showTitleAndBorderRadio=$(a.editDialog.node).find("#titleAndBorder"),a.titleInput=$(a.editDialog.node).find("input[name='title']"),a.initModuleData(),a.operateModuleData()};o.prototype={initModuleData:function(){var t=this;t.titleInput.val(t.moduleData.data.title);var e=parseInt(t.moduleData.data.showTitleAndBorder)||0;e?t.showTitleAndBorderRadio.addClass("curChosen"):t.showTitleAndBorderRadio.removeClass("curChosen")},operateModuleData:function(){var t=this;t.closeAndCancelDialogBtn.on("click",function(){t.editDialog.close().remove()}),t.showTitleAndBorderRadio.on("click",function(){$(this).toggleClass("curChosen")}),t.saveDialogBtn.on("click",function(){var e=$.trim(t.titleInput.val()),o=t.showTitleAndBorderRadio.hasClass("curChosen")?1:0;if(0===e.length)return dialog({title:"\u63d0\u793a",content:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01",okValue:"\u786e\u5b9a",ok:function(){this.close().remove()}}).showModal(),!1;var a={operatetype:2,operatedata:{providerid:pageEntity.providerid,username:pageEntity.username,data:{title:e,showTitleAndBorder:o}}};a.operatedata=$.extend(t.moduleData,a.operatedata),t.module.update({data:a.data},function(){t.editDialog.close().remove()})})}},t.exports=o},81:function(t,e){var o=function(t,e,o){var a=this;a.module=t,a.moduleBox=t.htmlEntity,a.moduleData=t.dataEntity,a.editDialog=dialog({content:e,title:"\u7f16\u8f91\u5185\u5bb9>\u53cb\u60c5\u94fe\u63a5"}).showModal(),a.options=o||{},a.options.rendedCallback&&a.options.rendedCallback.call(a),a.closeAndCancelDialogBtn=$(a.editDialog.node).find(".t-close,.Cancel"),a.saveDialogBtn=$(a.editDialog.node).find(".Save"),a.showTitleAndBorderRadio=$(a.editDialog.node).find("#titleAndBorder"),a.titleInput=$(a.editDialog.node).find("input[name='title']"),a.initModuleData(),a.operateModuleData()};o.prototype={initModuleData:function(){var t=this;t.titleInput.val(t.moduleData.data.title);var e=parseInt(t.moduleData.data.showTitleAndBorder)||0;e?t.showTitleAndBorderRadio.addClass("curChosen"):t.showTitleAndBorderRadio.removeClass("curChosen")},operateModuleData:function(){var t=this;t.closeAndCancelDialogBtn.on("click",function(){t.editDialog.close().remove()}),t.showTitleAndBorderRadio.on("click",function(){$(this).toggleClass("curChosen")}),t.saveDialogBtn.on("click",function(){var e=$.trim(t.titleInput.val()),o=t.showTitleAndBorderRadio.hasClass("curChosen")?1:0;if(0===e.length)return dialog({title:"\u63d0\u793a",content:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01",okValue:"\u786e\u5b9a",ok:function(){this.close().remove()}}).showModal(),!1;var a={operatetype:2,operatedata:{providerid:pageEntity.providerid,username:pageEntity.username,data:{title:e,showTitleAndBorder:o}}};a.operatedata=$.extend(t.moduleData,a.operatedata),t.module.update({data:a.data},function(){t.editDialog.close().remove()})})}},t.exports=o},82:function(t,e){function o(t,e,o){var a=this;a.moduleEntity=t,a.dialogEntity=dialog({content:e,title:"\u7f16\u8f91\u5185\u5bb9>\u6700\u65b0\u4f9b\u5e94"}).showModal(),a.options=o||{},a.options.rendedCallback&&a.options.rendedCallback.call(a),a.btnCancel=$(a.dialogEntity.node).find(".t-close,.Cancel"),a.btnSave=$(a.dialogEntity.node).find(".Save"),a.chkShowTitleAndBorder=$(a.dialogEntity.node).find("#titleAndBorder"),a.txtTitle=$(a.dialogEntity.node).find("input[name='title']"),a.initData(),a.bindEvent()}o.prototype.initData=function(){var t=this;t.txtTitle.val(t.moduleEntity.dataEntity.data.title);var e=parseInt(t.moduleEntity.dataEntity.data.showTitleAndBorder)||0;e?t.chkShowTitleAndBorder.addClass("curChosen"):t.chkShowTitleAndBorder.removeClass("curChosen")},o.prototype.bindEvent=function(){var t=this;t.btnCancel.on("click",function(){t.dialogEntity.remove()}),t.chkShowTitleAndBorder.on("click",function(){$(this).toggleClass("curChosen")}),t.btnSave.click(function(e){var o=$.trim(t.txtTitle.val()),a=t.chkShowTitleAndBorder.hasClass("curChosen")?1:0,i={operatetype:2,operatedata:{providerid:pageEntity.providerid,username:pageEntity.username,data:{title:o,showTitleAndBorder:a}}};arguments.callee;return i.operatedata=$.extend({},t.moduleEntity.dataEntity,i.operatedata),0===o.length?(dialog({title:"\u63d0\u793a",content:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01",okValue:"\u786e\u5b9a",ok:function(){this.remove()}}).showModal(),!1):void t.moduleEntity.update({data:i.operatedata.data},function(){t.dialogEntity.close().remove()})})},t.exports=o},83:function(t,e){var o=function(t,e,o){var a=this;a.module=t,a.moduleBox=t.htmlEntity,a.moduleData=t.dataEntity,a.editDialog=dialog({content:e,title:"\u7f16\u8f91\u5185\u5bb9>\u4e70\u5356\u901a\u6863\u6848"}).showModal(),a.options=o||{},a.options.rendedCallback&&a.options.rendedCallback.call(a),a.closeAndCancelDialogBtn=$(a.editDialog.node).find(".t-close,.Cancel"),a.saveDialogBtn=$(a.editDialog.node).find(".Save"),a.showTitleAndBorderRadio=$(a.editDialog.node).find("#titleAndBorder"),a.titleInput=$(a.editDialog.node).find("input[name='title']"),a.initModuleData(),a.operateModuleData()};o.prototype={initModuleData:function(){var t=this;t.titleInput.val(t.moduleData.data.title);var e=parseInt(t.moduleData.data.showTitleAndBorder)||0;e?t.showTitleAndBorderRadio.addClass("curChosen"):t.showTitleAndBorderRadio.removeClass("curChosen")},operateModuleData:function(){var t=this;t.closeAndCancelDialogBtn.on("click",function(){t.editDialog.close().remove()}),t.showTitleAndBorderRadio.on("click",function(){$(this).toggleClass("curChosen")}),t.saveDialogBtn.on("click",function(){var e=$.trim(t.titleInput.val()),o=t.showTitleAndBorderRadio.hasClass("curChosen")?1:0;if(0===e.length)return dialog({title:"\u63d0\u793a",content:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01",okValue:"\u786e\u5b9a",ok:function(){this.close().remove()}}).showModal(),!1;var a={operatetype:2,operatedata:{providerid:pageEntity.providerid,username:pageEntity.username,data:{title:e,showTitleAndBorder:o}}};a.operatedata=$.extend(t.moduleData,a.operatedata),t.module.update({data:a.data},function(){t.editDialog.close().remove()})})}},t.exports=o},84:function(t,e,o){var a=o(65),i=function(t,e,o){this.uploadUrl="//imgup.b2b.hc360.com/imgup/turbine/action/imgup.PicManagementAction/eventsubmit_doPerform/ddd",this.moduleEntity=t,this.moduleData=t.dataEntity.data,this.option=o||{},this.selectedStyleSet=a.formatDate(this.moduleData.button.selected),this.unSelectedStyleSet=a.formatDate(this.moduleData.button.unselected),this.borderType={none:"\u65e0\u8fb9\u6846",solid:"\u5b9e\u7ebf",dashed:"\u70b9\u7ebf"},this.navBackgroundColor=a.serializeStyle(this.moduleData.background).background||"",this.initLayer(e)};i.prototype={constructor:i,initLayer:function(t){var e=this,i=e.selectedStyleSet,n=e.unSelectedStyleSet,r={fontType:["\u5b8b\u4f53","\u4eff\u5b8b","\u9ed1\u4f53","\u6977\u4f53"],fontSize:["12","14","16"],selectedColor:i.color,selectedBorderColor:i.border?i.border.split(" ")[2]:"",unSelectedColor:n.color,unSelectedBorderColor:n.border?n.border.split(" ")[2]:"",selectBackground:i?a.getBgUrl(i.background):void 0,unSelectBackground:n?a.getBgUrl(n.background):void 0,navBackground:a.getBgUrl(e.moduleData.background),navBackgroundColor:e.navBackgroundColor,borderType:["\u65e0\u8fb9\u6846","\u5b9e\u7ebf","\u70b9\u7ebf"],setSelectFontType:function(){return a.setFontType(i,"\u5b8b\u4f53",this)},setSelectFontSize:function(){return a.setFontSize(i,"12",this)},setSelectFontBold:function(){return a.setFontBold(i)},setSelectFontStyle:function(){return a.setFontStyle(i)},setSelectBorderType:function(){var t=i.border,o=t?t.split(" ")[1]:"none";return this==e.borderType[o]?"<option selected>"+this+"</option>":"<option>"+this+"</option>"},unSelectFontType:function(){return a.setFontType(n,"\u5b8b\u4f53",this)},unSelectFontSize:function(){return a.setFontSize(n,"12",this)},unSelectFontBold:function(){return a.setFontBold(n)},unSelectFontStyle:function(){return a.setFontStyle(n)},unSelectBorderType:function(){var t=n.border,o=t?t.split(" ")[1]:"none";return this==e.borderType[o]?"<option selected>"+this+"</option>":"<option>"+this+"</option>"}};o.e(3,function(a){o(54),e.option.rendedCallback&&e.option.rendedCallback.call(e),e.navDialog=dialog({content:mustache.render(t,r),title:"\u7f16\u8f91\u5185\u5bb9>\u5bfc\u822a\u680f"}).showModal(),e.nav=$(e.navDialog.node),e.navBtnSet=e.nav.find('[node-name="navBtnSet"]'),e.navBgSet=e.nav.find('[node-name="navBgSet"]'),e.bindEvent()})},bindEvent:function(){var t=this,e=t.navBtnSet.find('[node-name="btnCheck"]'),o=t.navBtnSet.find('[node-name="navContainer"]'),i=o.find('[node-name="checkBtnSet"]'),n=o.find('[node-name="uncheckBtnSet"]');t.nav.on("click",".t-close,.Cancel",function(){t.navDialog.close().remove()}),t.nav.on("click",".Save",function(){t.dialogSetSave()}),e.on("click","span",function(){e.find("span").removeClass(),$(this).addClass("checked").siblings().addClass("unchecked"),o.find(".layout-info").hide().eq($(this).index()).show()}),t.navBtnSet.on("click",".checkBox",function(){$(this).hasClass("curCheckBox")?$(this).removeClass("curCheckBox"):$(this).addClass("curCheckBox")}),t.nav.on("click",".radioCon,.sp-replacer",function(){var t=$(this).parent(".radioBox").next(".pic-box"),e=t.next(".navimg-file-box");$(this).addClass("curRadioBox").siblings().removeClass("curRadioBox"),2==$(this).index()?t.show():(t.hide(),e.hide())}),a.createColorpicker(i.find('[node-name="fontCorlorJoe"]'),t.selectedStyleSet.color,t.navDialog),a.createColorpicker(i.find('[node-name="borderColorJoe"]'),t.selectedStyleSet["border-color"],t.navDialog),a.createColorpicker(n.find('[node-name="fontCorlorJoe"]'),t.unSelectedStyleSet.color,t.navDialog),a.createColorpicker(n.find('[node-name="borderColorJoe"]'),t.unSelectedStyleSet["border-color"],t.navDialog),a.createColorpicker(t.navBgSet.find('[node-name="bgColorJoe"]'),t.navBackgroundColor,t.navDialog,null,function(t){var e=$(this).closest(".radioCon"),o=$(this).closest(".radioBox").next(".pic-box"),a=o.next(".navimg-file-box");e.addClass("curRadioBox").siblings().removeClass("curRadioBox"),o.hide(),a.hide()});var r=this.nav.find('[node-name="imgUpload"]');r.click(function(){$(this).parent(".pic-box").hide(),$(this).parents(".layout-info-con").find(".navimg-file-box").show()});var l=this.nav.find('[node-name="undo"]');l.click(function(){$(this).parents(".navimg-file-box").find("span.txt").html("\u672a\u9009\u62e9\u4efb\u4f55\u6587\u4ef6").end().hide(),$(this).parents(".layout-info-con").find(".pic-box").show()}),this.btnBgUpload("#checkImgUpload",i),this.btnBgUpload("#unCheckImgUpload",n),this.navBgUpload()},dialogSetSave:function(){var t=this,e={},o=t.navBgSet.find(".pic-box"),a=1===t.navBgSet.find(".radioBox .curRadioBox").index(),i=t.navBgSet.find('[node-name="bgColorJoe"]').attr("data-color");e.button={selected:t.formData('[node-name="checkBtnSet"]'),unselected:t.formData('[node-name="uncheckBtnSet"]')},o.is(":visible")?e.background="background:url("+o.find(".picUpdetaImg img").attr("src")+")":a&&i?e.background="background:"+i+";":e.background="",t.moduleEntity.update({data:e},function(){t.navDialog.close().remove()})},btnBgUpload:function(t,e){var o=this,i=e.find(".pic-box"),n=e.find(".navimg-file-box"),r=n.find("span.txt"),l=n.find('[node-name="upload"]'),d="\u672a\u9009\u62e9\u4efb\u4f55\u6587\u4ef6",s={swf:"//style.org.hc360.cn/js/module/shop3.0/dist/components/webuploader/webuploader.swf",server:o.uploadUrl,pick:{id:t,multiple:!1},formData:{operType:"upload",picstr:$("#picstr").val()||""},fileVal:"file",threads:1,fileSingleSizeLimit:102400,accept:{title:"Images",extensions:"gif,jpg,jpeg,png",mimeTypes:"image/gif,image/jpg,image/jpeg,image/png"},compress:!1,duplicate:!0,disableGlobalDnd:!0};a.createWebuploder(s,l,r,d,function(t){r.html("\u672a\u9009\u62e9\u4efb\u4f55\u6587\u4ef6").end().hide(),i.show().find(".picUpdetaImg p").empty().append(t)})},navBgUpload:function(){var t=this,e=this.navBgSet.find(".pic-box"),o=this.navBgSet.find(".navimg-file-box"),i=o.find("span.txt"),n=o.find('[node-name="upload"]'),r="\u672a\u9009\u62e9\u4efb\u4f55\u6587\u4ef6",l={swf:"//style.org.hc360.cn/js/module/shop3.0/dist/components/webuploader/webuploader.swf",server:t.uploadUrl,pick:{id:"#navBgUpload",multiple:!1},formData:{operType:"upload",picstr:$("#picstr").val()||""},fileVal:"file",threads:1,fileSingleSizeLimit:102400,accept:{title:"Images",extensions:"gif,jpg,jpeg,png",mimeTypes:"image/gif,image/jpg,image/jpeg,image/png"},compress:!1,duplicate:!0,disableGlobalDnd:!0};a.createWebuploder(l,n,i,r,function(t){i.html("\u672a\u9009\u62e9\u4efb\u4f55\u6587\u4ef6").end().hide(),e.show().find(".picUpdetaImg p").empty().append(t)})},formData:function(t){var e=this,o="",a=e.nav.find(t),i=a.find(".radioBox>span.radioCon"),n=a.find(".checkBox"),r=a.find(".pic-box .picUpdetaImg img").attr("src"),l=e.getBorderType(a.find('[name="borderStyle"] option:selected').html()),d=a.find('[node-name="borderColorJoe"]').attr("data-color"),s={"font-family":a.find('[name="wordType"] option:selected').html(),"font-size":a.find('[name="wordSize"] option:selected').html()+"px","font-weight":n.eq(0).hasClass("curCheckBox")?"bold":"normal","font-style":n.eq(1).hasClass("curCheckBox")?"italic":"normal",color:a.find('[node-name="fontCorlorJoe"]').attr("data-color"),border:"1px "+l+" "+d};i.eq(0).hasClass("curRadioBox")?s.background="":r?s.background="url("+r+")":s.background="";for(var c in s)o+=c+":"+s[c]+";";return o},getBorderType:function(t){var e="";return $.each(this.borderType,function(o,a){if(t==a)return e=o,!1}),e}},t.exports=i},85:function(t,e){var o=function(t,e,o){var a=this;a.module=t,a.moduleBox=t.htmlEntity,a.moduleData=t.dataEntity,a.editDialog=dialog({content:e,title:"\u7f16\u8f91\u5185\u5bb9>\u4ea7\u54c1\u5206\u7c7b"}).showModal(),a.options=o||{},a.options.rendedCallback&&a.options.rendedCallback.call(a),a.closeAndCancelDialogBtn=$(a.editDialog.node).find(".t-close,.Cancel"),a.saveDialogBtn=$(a.editDialog.node).find(".Save"),a.showTitleAndBorderRadio=$(a.editDialog.node).find("#titleAndBorder"),a.titleInput=$(a.editDialog.node).find("input[name='title']"),a.initModuleData(),a.operateModuleData()};o.prototype={initModuleData:function(){var t=this;t.titleInput.val(t.moduleData.data.title);var e=parseInt(t.moduleData.data.showTitleAndBorder)||0;e?t.showTitleAndBorderRadio.addClass("curChosen"):t.showTitleAndBorderRadio.removeClass("curChosen")},operateModuleData:function(){var t=this;t.closeAndCancelDialogBtn.on("click",function(){t.editDialog.close().remove()}),t.showTitleAndBorderRadio.on("click",function(){$(this).toggleClass("curChosen");
}),t.saveDialogBtn.on("click",function(){var e=$.trim(t.titleInput.val()),o=t.showTitleAndBorderRadio.hasClass("curChosen")?1:0;if(0===e.length)return dialog({title:"\u63d0\u793a",content:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01",okValue:"\u786e\u5b9a",ok:function(){this.close().remove()}}).showModal(),!1;var a={operatetype:2,operatedata:{providerid:pageEntity.providerid,username:pageEntity.username,data:{title:e,showTitleAndBorder:o}}};a.operatedata=$.extend(t.moduleData,a.operatedata),t.module.update({data:a.data},function(){t.editDialog.close().remove()})})}},t.exports=o},86:function(t,e){var o=function(t,e,o){var a=this;a.module=t,a.moduleBox=t.htmlEntity,a.moduleData=t.dataEntity,a.editDialog=dialog({content:e,title:"\u7f16\u8f91\u5185\u5bb9>\u4ea7\u54c1\u6a71\u7a97"}).showModal(),a.options=o||{},a.options.rendedCallback&&a.options.rendedCallback.call(a),a.closeAndCancelDialogBtn=$(a.editDialog.node).find(".t-close,.Cancel"),a.saveDialogBtn=$(a.editDialog.node).find(".Save"),a.showTitleAndBorderRadio=$(a.editDialog.node).find("#titleAndBorder_proWin"),a.titleInput=$(a.editDialog.node).find("input[name='title']"),a.initModuleData(),a.operateModuleData()};o.prototype={initModuleData:function(){var t=this;t.titleInput.val(t.moduleData.data.title);var e=parseInt(t.moduleData.data.showTitleAndBorder)||0;e?t.showTitleAndBorderRadio.addClass("curChosen"):t.showTitleAndBorderRadio.removeClass("curChosen")},operateModuleData:function(){var t=this;t.closeAndCancelDialogBtn.on("click",function(){t.editDialog.close()}),t.showTitleAndBorderRadio.on("click",function(){$(this).toggleClass("curChosen")}),t.saveDialogBtn.on("click",function(){var e=$.trim(t.titleInput.val()),o=t.showTitleAndBorderRadio.hasClass("curChosen")?1:0;if(0===e.length)return dialog({title:"\u63d0\u793a",content:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01",okValue:"\u786e\u5b9a",ok:function(){this.close().remove()}}).showModal(),!1;var a={operatetype:2,operatedata:{providerid:pageEntity.providerid,username:pageEntity.username,data:{title:e,showTitleAndBorder:o}}};a.operatedata=$.extend(t.moduleData,a.operatedata),t.module.update({data:a.data},function(){t.editDialog.close().remove()})})}},t.exports=o},87:function(t,e,o){var a=o(65),i=o(53),n=function(t,e,o){this.moduleEntity=t,this.pageNumber=40,this.proLimit=16,this.option=o||{},this.proInterface={onlineProduct:"/detail/turbine/action/GetSelectProductListAction/eventsubmit_doBusinchance/doBusinchance",cateList:"/detail/turbine/action/GetProductSupcatAction/eventsubmit_doGetsupcat/doGetsupcat",cateParams:"/detail/turbine/action/GetParamItemAction/eventsubmit_doGetparam/doGetparam",setParam:"/detail/turbine/action/GetCustomlateProductListAction/eventsubmit_doCustomlateproduct/doCustomlateproduct"},this.moduleData=$.extend(!0,{},t.dataEntity.data),this.moduleHtml=i.getTemplateFromHTML(e),this.proListDate=this.moduleData.prolist,this.defaultSupercateId=this.moduleData.supercatid,this.defaultParamList=this.moduleData.paramlist,this.paramList=[];var a=this;a.def=this.loadComponents(),$.when.apply(null,this.def).done(function(){a.initLayer(e)})};n.prototype={constructor:n,initLayer:function(t){var e=this,o=e.moduleData.prolist.slice(0,e.proLimit),a={title:e.moduleData.title,isShowTitle:1==e.moduleData.showTitleAndBorder,len:o.length,setParamClass:function(){if(0===this.len)return"proGrayBtn"}};e.option.rendedCallback&&e.option.rendedCallback.call(e),e.profWinDialog=dialog({title:"\u7f16\u8f91\u5185\u5bb9>\u4e13\u4e1a\u6a71\u7a97",content:mustache.render(t,a)}).showModal(),e.bindEvent()},bindEvent:function(){var t=this;t.dialogContainer=$(t.profWinDialog.node),t.profWinWrap=t.dialogContainer.find('[node-name="profWin"]'),t.selectProBtn=t.profWinWrap.find('[node-name="selectProBtn"]'),t.setParaBtn=t.profWinWrap.find('[node-name="setParamBtn"]'),t.setParamWrap=t.dialogContainer.find('[node-name="setParam"]'),t.profWinWrap.on("click",".Cancel,.t-close",function(){t.profWinDialog.close().remove()}),t.profWinWrap.on("click",".Save",function(){t.saveModuleData()}),t.profWinWrap.on("click",".chosen",function(){$(this).toggleClass("curChosen")}),t.selectProBtn.click(function(){$(this).data("isClick")||($(this).data("isClick",!0),t.CateLodingDialog=dialog({content:'<span class="ui-dialog-loading">\u52a0\u8f7d\u4e2d..</span>'}).show(),t.CateLodingDialog.addEventListener("close",function(){t.CateLodingDialog=null,t.selectProBtn.data("isClick",!1)}),t.initSelectCateDialog())}),t.setParaBtn.click(function(){t.proListDate.length>0&&!$(this).data("isClick")&&($(this).data("isClick",!0),t.paramLodingDialog=dialog({content:'<span class="ui-dialog-loading">\u52a0\u8f7d\u4e2d..</span>'}).show(),t.paramLodingDialog.addEventListener("close",function(){t.paramLodingDialog=null,t.setParaBtn.data("isClick",!1)}),t.initParamTitle())})},saveModuleData:function(){var t=this,e=t.moduleData.prolist,o=$.trim(t.profWinWrap.find('input[name="title"]').val()),i=o.length;if(0===t.defaultParamList.length)return a.createDialog("\u53c2\u6570\u9879\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u8bf7\u8bbe\u7f6e\u53c2\u6570\u9879!"),!1;if(0===i||i>5){var n=0===i?"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01":"\u6807\u9898\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e5\u4e2a\u5b57\u7b26\uff01";return void a.createDialog(n)}var r={title:o,showTitleAndBorder:t.profWinWrap.find(".chosen").hasClass("curChosen")?1:0,supercatid:t.defaultSupercateId,prolist:e.map(function(t){return{bcid:t.bcid}}),paramlist:t.defaultParamList};t.moduleEntity.update({data:r},function(){t.profWinDialog.close().remove()})},initSelectCateDialog:function(){var t=this;t.getAjaxDef(t.proInterface.cateList,{providerid:pageEntity.providerid}).done(function(e){if(0==e.state)return t.CateLodingDialog&&t.CateLodingDialog.close().remove(),void a.createDialog(e.message);var o=e.data;if(0==o.length)t.CateLodingDialog&&t.CateLodingDialog.close().remove(),a.createDialog("\u65e0\u53ef\u9009\u7c7b\u76ee\uff0c\u8bf7\u5148\u53d1\u5e03\u5546\u54c1\u5230\u76f8\u5e94\u7c7b\u76ee\u4e2d");else{if(t.CateLodingDialog&&t.CateLodingDialog.close().remove(),t.cateListDialog=dialog({title:"\u9009\u62e9\u4ea7\u54c1\u7c7b\u76ee",content:t.moduleHtml.selectCategory}).showModal(),t.selectCateDialogWrap=$(t.cateListDialog.node),t.cateList=t.selectCateDialogWrap.find('[node-name="cateList"]'),$.each(o,function(e,o){o.supercatid==t.defaultSupercateId&&(o.isSelect=!0)}),t.moduleHtml.cateListModule){var i=mustache.render(t.moduleHtml.cateListModule,{cateDate:o,stringify:function(){return JSON.stringify(this)}});t.cateList.html(i)}t.selectCateDialogWrap.on("click",".Cancel",function(){t.cateListDialog.close().remove()}),t.cateList.find("li").click(function(){var e=$(this);e.data("isClick")||(e.data("isClick",!0),t.proLodingDialog=dialog({content:'<span class="ui-dialog-loading">\u52a0\u8f7d\u4e2d..</span>'}).show(),t.proLodingDialog.addEventListener("close",function(){t.proLodingDialog=null,e.data("isClick",!1)}),t.initSelectProductDialog(e))}),t.cateList.find("li").each(function(t,e){$(e).data("cateEntity",$(e).attr("cateEntity"))})}}).fail(function(){t.CateLodingDialog&&t.CateLodingDialog.close().remove(),a.createDialog("\u83b7\u53d6\u5546\u673a\u7ec8\u6781\u7c7b\u76ee\u63a5\u53e3\u5931\u8d25\uff01")})},initSelectProductDialog:function(t){var e=this,o=e.cateList.find("li").eq(t.index()).data("cateEntity");e.cateEntity=JSON.parse(o);var a=e.getAjaxDef(e.proInterface.onlineProduct,{pageindex:1,pagesize:e.pageNumber,providerid:pageEntity.providerid,supercatid:e.cateEntity.supercatid});a.done(function(o){e.proListDialog=dialog({title:"\u4e13\u4e1a\u6a71\u7a97>\u63d2\u5165\u4ea7\u54c1",content:e.moduleHtml.selectProduct}),e.proListWrap=$(e.proListDialog.node),e.proListDate=e.moduleData.prolist.slice(0,e.proLimit),e.getShellHtml(o,"initShop"),e.getSelectHtml(),e.selecProWrap=e.proListWrap.find(".seleRight"),e.onlineProList=e.proListWrap.find(".seleListCon dl"),e.productLen=e.selecProWrap.find("ul li").length,e.selectProLenWrap=e.selecProWrap.find('[node-name="selectProLenWrap"]'),e.noBusiness=e.proListWrap.find('[node-name="noBusiness"]'),e.proListWrap.find(".seleClass span").html(t.find("a").html()),e.proListWrap.find('[data-node-name="Please"]').attr("href","http://my.b2b.hc360.com/my/turbine/template/corcenter%2Cbusiness%2Cbusinonsale.html"),e.proListWrap.on("click",".Cancel,.returnCate",function(){e.proListDialog.close().remove()}),e.chooseProduct(),e.undoSelectProduct(),e.searchProduct(),e.saveSelectProduct()})},getAjaxDef:function(t,e){return $.ajax({url:t,type:"get",data:e,jsonp:"callback",dataType:"jsonp"})},getShellHtml:function(t,e){var o=this,i=t.data,n=i.prolist,r=o.proListWrap.find(".seleList .pageList");if(shellBoxs=o.proListWrap.find('.seleList>div[data-node-name="proListWrap"]'),0==t.state)return o.proLodingDialog&&o.proLodingDialog.close().remove(),a.createDialog(t.message),!1;if(shellBoxs.hide(),0==n.length)return o.proLodingDialog&&o.proLodingDialog.close().remove(),"initShop"==e?shellBoxs.eq("0").show():shellBoxs.eq("1").show(),r.length>0?r.remove():"",o.proListDialog.showModal(),!1;if(shellBoxs.eq("2").show(),o.proLodingDialog&&o.proLodingDialog.close().remove(),$.each(n,function(t,e){var a=e.bcid;$.each(o.proListDate,function(t,o){if(o.bcid==a)return void(e.isChoose=!0)})}),o.moduleHtml.onlineProModule){var l=mustache.render(o.moduleHtml.onlineProModule,{proList:n});o.proListWrap.find(".seleListCon dl").html(l),a.initImgSrc(o.proListWrap.find(".seleListCon dl dd"))}o.proListDialog.open||o.proListDialog.showModal(),"initShop"!=e&&"searchShop"!=e||o.createPagination(0,i.procount)},getSelectHtml:function(){var t=this,e={proList:t.proListDate,len:t.proListDate.length,isShow:function(){return 0!==this.len}};if(t.cateEntity.supercatid!=t.defaultSupercateId&&(e.len=0,e.proList=[]),t.moduleHtml.selectProModule){var o=mustache.render(t.moduleHtml.selectProModule,e);t.proListWrap.find(".seleRight").html(o),a.initImgSrc(t.proListWrap.find(".seleRight li"))}},createPagination:function(t,e){var o=this,a=o.proListWrap.find(".seleList .pageList");0===a.length&&(a=$("<div class='pageList'></div>").appendTo(o.proListWrap.find(".seleList"))),a.pagination(e,{num_edge_entries:0,num_display_entries:5,current_page:t,items_per_page:o.pageNumber,prev_text:"&nbsp;",next_text:"&nbsp;",link_to:"#p__id__",ellipse_text:"...",load_first_page:!1,callback:function(t){var e={pageindex:++t,providerid:pageEntity.providerid,supercatid:o.cateEntity.supercatid,pagesize:o.pageNumber},a=o.proListWrap.find(".seleProSea input").val();a.length>0&&(e.productname=encodeURIComponent(a)),o.getAjaxDef(o.proInterface.onlineProduct,e).done(function(t){o.getShellHtml(t,"nextPage")})}})},chooseProduct:function(){var t=this;t.proListWrap.on("click",'[node-name="selectBtn"]',function(){if(t.noBusiness.is(":visible")&&t.noBusiness.hide(),t.productLen==t.proLimit)return a.createDialog("\u60a8\u9009\u62e9\u7684\u4ea7\u54c1\u5df2\u8fbe\u4e0a\u9650!"),!1;if(!$(this).hasClass("gBtn2")){$(this).addClass("gBtn2").html("\u5df2\u9009\u62e9");var e=$(this).parents("dd"),o={linkurl:e.find(".picbox a").attr("href"),picurl:e.find(".picbox img").attr("src"),bcname:e.find(".picboxTit a").html(),bcid:e.attr("data-bcid")};if(t.proListDate.unshift(o),t.moduleHtml.productHtml){var i=mustache.render(t.moduleHtml.productHtml,o);t.selecProWrap.find("ul").prepend(i)}t.productLen++,t.selectProLenWrap.html(t.productLen+"\u6761")}})},undoSelectProduct:function(){var t=this;t.proListWrap.on("click",'[node-name="closePro"]',function(){var e=$(this).parent("li").attr("data-bcid");$.each(t.proListDate,function(o,a){if(a.bcid==e)return t.proListDate.splice(o+1,1),!1}),$(this).parents("li").remove(),t.onlineProList.find("dd").each(function(){$(this).attr("data-bcid")==e&&$(this).find(".picboxBtn button").html("\u9009\u62e9").removeClass("gBtn2")}),t.productLen--,t.selectProLenWrap.html(t.productLen+"\u6761"),0==t.productLen&&t.noBusiness.show()})},searchProduct:function(){var t=this;t.proListWrap.on("click",'[node-name="search"]',function(){var e=$(this).parent(".seleProSea").find("input").val(),o={productname:0==e.length?"":encodeURIComponent(e),providerid:pageEntity.providerid,supercatid:t.cateEntity.supercatid,pageindex:1,pagesize:t.pageNumber};t.getAjaxDef(t.proInterface.onlineProduct,o).done(function(e){t.getShellHtml(e,"searchShop")})})},saveSelectProduct:function(){var t=this,e=[];t.proListWrap.on("click",".Save",function(){t.selecProWrap.find("ul li").each(function(){var t={bcid:$(this).attr("data-bcid"),bcname:$(this).find(".picboxTit a").html(),picurl:$(this).find(".picbox img").attr("src"),linkurl:$(this).find(".picbox a").attr("href")};e.push(t)}),t.moduleData.prolist=e,t.defaultSupercateId!=t.cateEntity.supercatid&&(t.defaultParamList=[],t.defaultSupercateId=t.cateEntity.supercatid),t.profWinWrap.find(".proLen").html(e.length),0!=e.length||t.selectProBtn.hasClass("proGrayBtn")?t.setParaBtn.removeClass("proGrayBtn"):t.setParaBtn.addClass("proGrayBtn"),t.cateListDialog.close().remove(),t.proListDialog.close().remove()})},initParamTitle:function(){var t=this;t.getAjaxDef(t.proInterface.cateParams,{providerid:pageEntity.providerid,supercatid:t.defaultSupercateId}).done(function(e){if(t.paramLodingDialog&&t.paramLodingDialog.close().remove(),0==e.state)return void a.createDialog(e.message);if(t.paramList=e.data,0==t.paramList.length)a.createDialog(e.message);else{var o=t.paramList.slice(0,t.paramList.length);o.sort(function(t,e){return t.type-e.type}),t.defaultSupercateId!=t.moduleEntity.dataEntity.data.supercatid?t.defaultParamList=o.slice(0,o.length).slice(0,4):t.defaultParamList=t.moduleEntity.dataEntity.data.paramlist;var i={paramObj:t.defaultParamList,paramArr:o,getClass:function(){var e,o=this;return $.each(t.defaultParamList,function(t,a){if(a.name==o.name)return e=t+2,!1}),e},getParamSet:function(){return JSON.stringify(this)}};if(t.moduleHtml.headerModule){var n=mustache.render(t.moduleHtml.headerModule,i);t.setParamWrap.find(".pTitBox").html(n)}t.setParamWrap.find(".pTitBox select option").each(function(){var t=JSON.parse($(this).parents("select").attr("_defaultParam"));$(this).html()==t.name&&$(this).attr("selected",!0)}),t.initParamContent(t.setParamWrap)}}).fail(function(){t.paramLodingDialog&&t.paramLodingDialog.close().remove()})},initParamContent:function(t){var e=this,o=e.defaultParamList.map(function(t){return encodeURIComponent(t.name)}),i=e.moduleData.prolist.map(function(t){return t.bcid}),n={providerid:pageEntity.providerid,supercatid:e.defaultSupercateId,paramlist:o.join(","),prolist:i.join(",")};e.getAjaxDef(e.proInterface.setParam,n).done(function(o){return 0==o.state?(e.paramLodingDialog&&e.paramLodingDialog.close().remove(),void a.createDialog(o.message)):(e.paramLodingDialog&&e.paramLodingDialog.close().remove(),e.sortProListDate=o.data,e.sortProListDate.sort(function(t,e){var t=i.indexOf(t.bcid),e=i.indexOf(e.bcid);return t-e}),e.createParamContent(t),void(e.setParamDialog||e.initSetParamDialog()))}).fail(function(){e.paramLodingDialog&&e.paramLodingDialog.close().remove()})},createParamContent:function(t){var e=this,o="{{#proListDate}}<dd>";o+='<div class="pList1">{{bcname}}</div>';for(var a=0;a<e.defaultParamList.length;a++){var i=a+2;o+='<div class="pList'+i+'">{{'+e.defaultParamList[a].fieldname+"}}</div>"}o+='<div class="pList6">{{#formatPrice}}{{price}}\u5143/{{unit}}{{/formatPrice}}{{^formatPrice}}\u9762\u8bae{{/formatPrice}}</div>',o+="</dd>{{/proListDate}}";var n=mustache.render(o,{proListDate:e.sortProListDate,formatPrice:function(){return 0!==parseFloat(this.price)}});t.find('[node-name="paramContent"]').html(n)},initSetParamDialog:function(){var t=this;t.setParamDialog=dialog({title:"\u8bbe\u7f6e\u4ea7\u54c1\u53c2\u6570",content:t.setParamWrap.html()}).showModal(),t.setParamDialogWrap=$(t.setParamDialog.node),t.setParamDialogWrap.find(".pTitBox select option").each(function(){var t=JSON.parse($(this).parents("select").attr("_defaultParam"));$(this).data("optionParam",JSON.parse($(this).attr("optionParam"))),$(this).parents("select").data("_defaultParam",t)}),t.setParamDialog.addEventListener("close",function(){t.setParamDialog.close().remove(),t.setParamDialog=null}),t.setParamDialogWrap.on("change",".pTitBox select",function(){var e=$(this).parent().index(),o=$(this).find("option:selected").data("optionParam");t.defaultParamList[e]=o,t.initParamContent(t.setParamDialogWrap)}),t.setParamDialogWrap.on("click",".Save",function(){t.savePrarmData()}),t.setParamDialogWrap.on("click",".Cancel",function(){t.setParamDialog.close().remove()})},savePrarmData:function(){var t=this,e=!0,o=[];$.each(t.defaultParamList,function(t,e){o.push(e.name)}),$.each(o.sort(),function(t,i){if(o[t+1]==i)return a.createDialog("\u4ea7\u54c1\u53c2\u6570\u9879\u4e0d\u80fd\u91cd\u590d\uff0c\u8bf7\u66f4\u6539\uff01"),e=!1,!1}),e&&t.setParamDialog.close().remove()},loadComponents:function(){var t=$.Deferred(),e=$.Deferred();return o.e(3,function(e){o(54),t.resolve()}),o.e(4,function(t){o(56),e.resolve()}),[t,e]}},t.exports=n},88:function(t,e,o){var a=o(65),i=function(t,e,o){this.moduleEntity=t,this.uploadUrl="//imgup.b2b.hc360.com/imgup/turbine/action/imgup.PicManagementAction/eventsubmit_doPerform/ddd",this.moduleData=t.dataEntity.data,this.option=o||{};var a=this;a.def=this.loadComponents(),$.when.apply(null,a.def).done(function(){a.initLayer(e)})};i.prototype={constructor:i,initLayer:function(t){var e=this,o=e.moduleData.backgroundurl,i=a.formatDate(e.moduleData.companyname),n=""==o?"":a.getBgUrl(o)||"",r=a.serializeStyle(o),l=parseInt(r.height)||110,d={fontType:["\u5b8b\u4f53","\u4eff\u5b8b","\u9ed1\u4f53","\u6977\u4f53"],fontSize:["12","14","16","18","20","22","24","26","28","30"],signHeight:[{text:"110\u50cf\u7d20",val:110},{text:"130\u50cf\u7d20",val:130},{text:"150\u50cf\u7d20",val:150}],height:l,logourl:e.moduleData.logourl,defaultBg:pageEntity.template.BrandImage,companyname:i,backgroundCollor:i.color?i.color:"#2399fe",showCompanyName:function(){var t=i.display;if("none"!=t)return"curCheckBox"},isShowDel:function(){var t=e.moduleData.logourl;return t?"block":"none"},isShowUserImg:function(){return o?"block":"none"},setFontSize:function(){return a.setFontSize(i,30,this)},setFontType:function(){return a.setFontType(i,"\u5b8b\u4f53",this)},setFontBold:function(){return a.setFontBold(i)},setFontStyle:function(){return a.setFontStyle(i)},setDefaultSign:function(){if(""==n)return"curRadioBox"},signSelectedHeight:function(){if(this.val==l)return"curRadioBox"},setUserSign:function(){if(""!=n)return"curRadioBox"},showUserSign:function(){return function(t,e){return"curRadioBox"==e(t)?"block":"none"}},signBjImg:function(){return function(t,e){if("curRadioBox"==e(t))return n}}};e.option.rendedCallback&&e.option.rendedCallback.call(e),e.signDialog=dialog({content:mustache.render(t,d),title:"\u7f16\u8f91\u5185\u5bb9>\u516c\u53f8\u62db\u724c"}).showModal(),e.sign=$(e.signDialog.node),e.logo=$('[node-name="companyLogo"]',e.sign),e.companyName=$('[node-name="companyName"]',e.sign),e.signHeight=$('[node-name="signHeight"]',e.sign),e.signHeightLimit=l,e.signList=$('[node-name="signList"]',e.sign),e.bindEvent(),a.createColorpicker(e.companyName.find('[node-name="colorjoe"]'),i.color,e.signDialog)},bindEvent:function(){var t=this;t.sign.on("click",".t-close,.Cancel",function(){t.signDialog.close().remove()}),t.companyName.on("click",".checkBox",function(){$(this).hasClass("curCheckBox")?$(this).removeClass("curCheckBox"):$(this).addClass("curCheckBox")}),t.signList.on("click",".radioCon",function(){var t=$(this).index(),e=$('[node-name="defaultSign"]'),o=$('[node-name="userSign"]');$(this).hasClass("curRadioBox")||($(this).addClass("curRadioBox").siblings().removeClass("curRadioBox"),0==t?(e.show(),o.hide()):1==t&&(o.show(),e.hide()))}),t.signHeight.on("click",".radioCon",function(){var e=$(this),o=$(this).attr("data-val")||"";e.hasClass("curRadioBox")||(e.addClass("curRadioBox").siblings().removeClass("curRadioBox"),t.signList.find(".wrapSignHeight").text(o));var a=$('[node-name="userSign"]',t.signList),i=a.find(".updown-file-box"),n=i.find(".txt");if(t.uploadEntity){var r=t.uploadEntity.getFiles(),l=r[r.length-1];l&&"error"===l.getStatus()&&l.name===n.text()&&l.setStatus("queued"),t.uploadEntity.options.formData.heightMaxLimit=o}}),this.logoUpload(),this.trademarkUpload(),this.saveModuleData()},logoUpload:function(){var t=this,e=$(".logo-box",t.logo),o=$(".updown-file-box",t.logo),i=$('[node-name="upload"]',o),n=$(".aDelBtn",t.logo),r=$('[node-name="undo"]',o),l=$(".txt",o),d="\u672a\u9009\u62e9\u4efb\u4f55\u6587\u4ef6";n.click(function(){$(".com-logo",t.logo).find("p").html(""),n.hide()}),$(".uploadBtn",t.logo).click(function(){e.hide(),o.show()}),r.click(function(){var t=e.show().find(".com-logo p img");return l.html(d),o.hide(),e.show(),0!=t.length&&t.attr("src")||n.hide(),!1});var s={swf:"//style.org.hc360.cn/js/module/shop3.0/dist/components/webuploader/webuploader.swf",server:t.uploadUrl,pick:{id:"#logoUploadBtn",multiple:!1},formData:{operType:"upload",picstr:$("#picstr").val()||""},fileVal:"file",threads:1,fileSingleSizeLimit:204800,accept:{title:"Images",extensions:"gif,jpg,jpeg,png",mimeTypes:"image/gif,image/jpg,image/jpeg,image/png"},compress:!1,duplicate:!0,disableGlobalDnd:!0};a.createWebuploder(s,i,l,d,function(t){l.html("\u672a\u9009\u62e9\u4efb\u4f55\u6587\u4ef6").end().hide(),n.show(),e.show().find(".com-logo p").empty().append(t)})},trademarkUpload:function(){var t=this,e=$('[node-name="userSign"]',t.signList),o=e.find(".updown-pic"),i=o.find(".uploadBtn"),n=e.find(".updown-file-box"),r=e.find('[node-name="customImg"]'),l=n.find('[node-name="upload"]'),d=n.find('[node-name="undo"]'),s=n.find(".txt"),c="\u672a\u9009\u62e9\u4efb\u4f55\u6587\u4ef6";i.click(function(){o.hide(),n.show()}),d.click(function(){var t=r.find('[noda-name="imgShowWrap"] img');return s.html(c),n.hide(),0!=t.length&&t.attr("src")||r.hide(),o.show(),!1});var p={swf:"//style.org.hc360.cn/js/module/shop3.0/dist/components/webuploader/webuploader.swf",server:t.uploadUrl,pick:{id:"#signUploadBtn",multiple:!1},formData:{operType:"upload",picstr:$("#picstr").val()||"",widthHeightLimitFlag:1,widthMinLimit:"0",widthMaxLimit:"1920",heightMinLimit:"0",heightMaxLimit:t.signHeightLimit},fileVal:"file",threads:1,fileSingleSizeLimit:5242880,accept:{title:"Images",extensions:"gif,jpg,jpeg,png",mimeTypes:"image/gif,image/jpg,image/jpeg,image/png"},compress:!1,duplicate:!0,disableGlobalDnd:!0};a.createWebuploder(p,l,s,c,function(t){n.find(".txt").html("\u672a\u9009\u62e9\u4efb\u4f55\u6587\u4ef6").end().hide(),o.show(),r.show().find('[noda-name="imgShowWrap"]').empty().append(t)},function(e){t.uploadEntity=e})},saveModuleData:function(){var t=this;t.sign.find(".Save").click(function(){var e=t.logo.find(".com-logo img").attr("src"),o={logourl:e?e:"",companyname:t.assemblyCompanyDate(),backgroundurl:t.assemblySignBj(),brandimage:pageEntity.template.BrandImage};t.moduleEntity.update({data:o},function(){t.signDialog.close().remove()})})},assemblyCompanyDate:function(){var t=this,e=t.companyName.find(".checkBox"),o={display:e.eq(0).hasClass("curCheckBox")?"":"none","font-family":$('[name="wordType"] option:selected').html(),"font-size":$('[name="wordSize"] option:selected').html()+"px","font-weight":e.eq(1).hasClass("curCheckBox")?"bold":"normal","font-style":e.eq(2).hasClass("curCheckBox")?"italic":"normal",color:t.companyName.find('[node-name="colorjoe"]').attr("data-color")},a="";for(var i in o)a+=i+":"+o[i]+";";return a},assemblySignBj:function(){var t=[],e=this.signList.find(".radioBox .radioCon");if(!e.eq(0).hasClass("curRadioBox")){var o=this.signList.find('[node-name="userSign"] .signBg-pic img').attr("src");""!=o&&t.push("background:url("+o+") no-repeat center center")}var a=this.signHeight.find(".curRadioBox").first();return a.length&&t.push("height:"+a.attr("data-val")+"px;"),t.join(";")},loadComponents:function(){var t=$.Deferred();o.e(3,function(e){o(54),t.resolve()});var e=$.Deferred();return o.e(1,function(t){o(44),e.resolve()}),[t,e]}},t.exports=i},89:function(t,e,o){t.exports=o(75)}});